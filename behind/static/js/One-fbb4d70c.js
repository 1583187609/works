import{d as e,r as s,a2 as a,aV as l,i as t,a_ as o,o as r,g as i,b as n,B as d,c as m,F as u,D as c,f,a3 as p,bz as v,aZ as b,br as y,a as g,e as _,u as h,bO as x,m as k,E as T}from"./rewrite-3b822c29.js";import{g as A}from"./system-fdbbef6b.js";import{l as S}from"./lodash-54c2f325.js";import{_ as B}from"./_plugin-vue_export-helper-1b428a4d.js";const j={class:"all-hide-scroll box"},q={class:"head f-sb-c"},C={class:"title f-fs-c"},L={class:"line-1"},N={class:"body"},V={class:"f-c-c f-0 pt-o",style:{width:"100%"}},F={key:1,class:"f-c-c pb-o"},G=B(e({__name:"SectionForm",props:{sections:{default:()=>[]},foldable:{type:Boolean,default:!0},request:null,submitText:{default:"提交"},resetText:{default:"重置"},extraParams:null},emits:["submit"],setup(e,{emit:B}){const G=e,{extraParams:E}=G,I=s(!1),O=s([]),P=s(),w=a((()=>Math.max(...G.sections.map(((e,s)=>(O.value[s]=e.fold||!1,e.fields.map((s=>(s.attrs=S.merge({},e.attrs,s.attrs),s))),A(null==e?void 0:e.fields))))))),z=l(S.merge({labelWidth:w.value+"em"},{})),D=l({});!function(e=[]){e.forEach((e=>{e.fields.forEach((e=>{const{prop:s,value:a}=e;D[s]=a}))}))}(null==G?void 0:G.sections);const U=()=>{const e=P.value;e&&e.validate(((e,s)=>{if(e){const e=S.merge({},E,D);(null==G?void 0:G.request)?(I.value=!0,G.request(e).then((e=>{T.success("提交成功")})).finally((()=>{I.value=!1}))):B("submit",e)}else{const e=Object.values(s)[0][0];T.error(e.message)}}))},M=()=>{const e=P.value;e&&e.resetFields()};return(s,a)=>{const l=t("BaseIcon"),T=t("BaseFormItem"),A=t("el-button"),S=t("el-form"),B=o("debounce");return e.sections.length?(r(),i(S,k({key:0,class:"section-form f-fs-s-c",model:D},z,{ref_key:"formRef",ref:P}),{default:n((()=>[d("div",j,[(r(!0),m(u,null,c(e.sections,((a,t)=>(r(),m("section",{class:"section",key:t},[d("div",q,[d("div",C,[d("span",L,f(a.title),1)]),e.foldable?(r(),i(l,{key:0,onClick:e=>O.value[t]=!O.value[t],class:"fold-btn",size:"1.3em",name:O.value[t]?"CaretBottom":"CaretTop"},null,8,["onClick","name"])):p("",!0)]),v(d("div",N,[(r(!0),m(u,null,c(a.fields,((e,a)=>(r(),i(T,{field:e,modelValue:D[e.prop],"onUpdate:modelValue":s=>D[e.prop]=s,key:a},{custom:n((({field:e})=>[b(s.$slots,e.prop,{field:e,form:D},void 0,!0)])),_:2},1032,["field","modelValue","onUpdate:modelValue"])))),128))],512),[[y,!O.value[t]]])])))),128))]),d("div",V,[v((r(),i(A,{type:"primary",disabled:I.value},{icon:n((()=>[g(l,{name:I.value?"Loading":"Promotion"},null,8,["name"])])),default:n((()=>[_(" "+f(e.submitText),1)])),_:1},8,["disabled"])),[[B,U,void 0,{immediate:!0}]]),g(A,{icon:h(x),onClick:M,disabled:I.value},{default:n((()=>[_(f(e.resetText),1)])),_:1},8,["icon","disabled"])])])),_:3},16,["model"])):(r(),m("div",F,"空空如也~"))}}}),[["__scopeId","data-v-c8af57f3"]]),E=e({__name:"One",setup(e){s(!1),s([{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"}]),l([{label:"Date",prop:"date",field:{type:"input"}},{prop:"name",label:"Name",field:{type:"input"}},{prop:"address",label:"Address",field:{type:"input"}}]),l([{date:"2016-05-03",name:"Tom1",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-02",name:"Tom2",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-04",name:"Tom3",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-01",name:"Tom4",address:"No. 189, Grove St, Los Angeles"}]),s("你好"),l(Array(10).fill("").map(((e,s)=>{const a=s+1;return{label:"项目"+a,prop:String(a),required:9===s}})));const a=s(Array(4).fill("").map(((e,s)=>{const a=String(s+1);return{title:"块标题"+a,fields:Array(10).fill("").map(((e,s)=>{const l=a+"_"+String(s+1);return{label:"项目"+l,prop:l,required:9===s}}))}})));return(e,s)=>(r(),i(G,{sections:a.value},null,8,["sections"]))}});export{E as default};
