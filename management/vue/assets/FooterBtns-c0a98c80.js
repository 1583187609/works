import{M as I,aa as N,aM as O,q as j,bs as D,aR as h,aS as z,aE as r,u as _,bz as y,s as u,bx as B,I as A,ao as H,H as k,b3 as C,t as P,F as T,aP as $,bc as G,c9 as J,cl as K,ch as Q,cr as U,cm as x,bN as W,cn as X,bH as Y}from"./index-bd59ce9f.js";import{g as Z}from"./index-f6c75c60.js";const ee={class:"footer-btns f-c-c f-0 pt-h pb-h"},te=I({__name:"FooterBtns",props:{loading:{type:Boolean},submitText:{default:"提交"},resetText:{default:"重置"},moreBtns:{default:()=>[]},formRef:{},isOmit:{type:Boolean,default:!0},log:{type:Boolean},debug:{type:Boolean},params:{},fetch:{},fetchSuccess:{},fetchFail:{},noSubmitProps:{},handleReq:{},disabled:{type:Boolean}},emits:["moreBtns","submit"],setup(R,{expose:S,emit:F}){const w=N("closePopup"),i=R,m=F,l=O(!1),M=j(()=>i.moreBtns.map(e=>Z(e)));D(()=>i.loading,e=>{l.value=e});function f(){const{log:e,debug:a,isOmit:s,noSubmitProps:n}=i;return new Promise((o,c)=>{let{params:t,formRef:d,handleReq:b}=i;d&&d.validate((q,E)=>{if(q){if(t=K(t),b&&(t=b(t)),s&&(t=Q(t)),t=U(t,n),(e||a)&&(x(t,"req"),a))return;o(t)}else{const g=Object.values(E)[0][0];W.error(g.message),c(g)}})})}const p=(e=i.submitText+"成功！",a,s,n=!0)=>{X(e),w(a),s==null||s()};function V(){f().then(e=>{const{log:a,fetch:s,fetchSuccess:n=p,fetchFail:o}=i;s?(l.value=!0,s(e).then(c=>{a&&x(c,"res"),n(i.submitText+"成功！")}).catch(()=>{o==null||o()}).finally(()=>{l.value=!1})):m("submit",e)}).catch(()=>{})}function L(){const{formRef:e}=i;e&&e.resetFields()}function v(e){const{name:a,needValid:s,to:n}=e;n===void 0&&(s?f().then(o=>{m("moreBtns",a,o,p)}).catch(()=>{}):m("moreBtns",a,void 0,p))}return S({formValidate:f}),(e,a)=>{const s=h("BaseIcon"),n=h("el-button"),o=h("BaseBtn"),c=z("debounce");return r(),_("div",ee,[e.submitText?y((r(),u(n,{key:0,type:"primary",disabled:e.disabled||l.value},{icon:B(()=>[A(s,{class:H({rotate:l.value}),name:l.value?"Loading":"Promotion"},null,8,["class","name"])]),default:B(()=>[k(" "+C(e.submitText),1)]),_:1},8,["disabled"])),[[c,V,void 0,{immediate:!0}]]):P("",!0),(r(!0),_(T,null,$(M.value,(t,d)=>(r(),_(T,{key:d},[t.popconfirm?(r(),u(o,{key:0,onClick:b=>v(t),name:t,disabled:e.disabled},null,8,["onClick","name","disabled"])):y((r(),u(o,{key:1,name:t,disabled:e.disabled},null,8,["name","disabled"])),[[c,()=>v(t),void 0,{immediate:!0}]])],64))),128)),e.resetText?(r(),u(n,{key:1,icon:G(J),onClick:L,disabled:e.disabled||l.value},{default:B(()=>[k(C(e.resetText),1)]),_:1},8,["icon","disabled"])):P("",!0)])}}});const oe=Y(te,[["__scopeId","data-v-97aca5c6"]]);export{oe as F};
