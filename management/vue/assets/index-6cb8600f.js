import{M as e,bO as t,aa as a,aM as s,aR as o,aE as p,s as l,bc as n,cR as i,cS as r}from"./index-e84f6b3a.js";import{P as d,D as u,h as c,f as b}from"./user-5febf191.js";import{_ as m}from"./AddEdit.vue_vue_type_script_setup_true_lang-b2951f3e.js";import"./UploadAvatar-0122fac7.js";import"./avatar-810e7140.js";const f=e({__name:"index",setup(e){const{getOpts:f}=t(),x=f("Sex"),h=f("UserType"),_=f("Enable"),v=a("openPopup"),y=s([{prop:"id",label:"用户ID"},{prop:"name",label:"用户姓名"},{prop:"age",label:"年龄",type:"BaseNumberRange"},{prop:"sex",label:"性别",type:"select",options:x},{prop:"type",label:"用户类型",type:"select",options:h},{prop:"status",label:"账号状态",type:"select",options:_}]),g=[{prop:"id",label:"用户ID",width:70},{prop:"name",label:"用户姓名",width:90},{prop:"sex_text",label:"性别",width:90,sortable:!0},{prop:"age",label:"年龄",width:90,sortable:!0},{prop:"address_text",label:"地址",minWidth:250},{prop:"phone",label:"电话",minWidth:120},{prop:"type_text",label:"用户类型",minWidth:90},{prop:"status",label:"状态",type:"BaseTag"}];function B(e,t,a){i({edit:()=>j(t,a),view:()=>function(e){v("查看",{component:m,attrs:{id:e.id,pureText:!0}})}(t),delete:()=>E([t.id],a),forbid:()=>D(t,a),enable:()=>D(t,a)},e)}function w(e,t,a){i({add:()=>j(null,a),delete:()=>E(t,a),export:()=>function(e,t){c({ids:e,cols:g}).then((e=>{r(e,"用户列表"),t()}))}(t,a)},e)}function j(e,t){v(e?"编辑":"新增",{component:m,attrs:{id:null==e?void 0:e.id,refreshList:t}})}function E(e,t){u({ids:e}).then((e=>{t()}))}function D(e,t){const{status:a,id:s}=e;b({id:s,status:1===a?2:1}).then((e=>{t()}))}return(e,t)=>{const a=o("BaseCrud");return p(),l(a,{cols:g,fields:y.value,fetch:n(d),extraBtns:["add",{name:"add",text:"新增（url)",to:"/user/detail"},,"delete","import","export"],groupBtns:["edit",{name:"edit",text:"编辑（url)",to:e=>`/user/detail?id=${e.id}`},"delete",e=>1===(null==e?void 0:e.status)?"forbid":"enable","view"],onExtraBtn:w,onGroupBtn:B,selection:"",index:"",sort:""},null,8,["fields","fetch","groupBtns"])}}});export{f as default};
