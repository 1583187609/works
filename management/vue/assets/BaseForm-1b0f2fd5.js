import{M as e,aK as a,c4 as t,aM as s,q as o,bs as l,aR as u,aE as m,s as r,bx as d,v as f,u as i,aP as n,aQ as p,F as c,H as b,ao as h,t as x,am as g,bA as v,cp as B,bZ as y,bH as T}from"./index-31bd5f7b.js";import{h as F}from"./_utils-595c60d1.js";import V from"./FooterBtns-757ffa78.js";import{d as R}from"./_config-c0994392.js";import"./index-3780be65.js";const _=T(e({__name:"BaseForm",props:{modelValue:{default:()=>a({})},fields:{default:()=>[]},pureText:{type:Boolean},fetch:{},fetchSuccess:{},fetchFail:{},span:{default:24},footer:{type:Boolean,default:!0},submitText:{},resetText:{},extraParams:{},moreBtns:{},loading:{type:Boolean},isOmit:{type:Boolean,default:!0},log:{type:Boolean,default:!t},debug:{type:Boolean},isCache:{type:Boolean},autoFixedFoot:{type:Boolean,default:!0},noSubmitProps:{},handleReq:{}},emits:["update:modelValue","submit","change","moreBtns"],setup(e,{expose:a,emit:t}){const T=e,_=t,S=s(null),k=s(),P=o((()=>{const e=B(T.fields);return y.merge({labelWidth:e+"em"},R)})),j=s([]),q=o({get:()=>T.modelValue,set(e){_("update:modelValue",e)}}),O=o((()=>y.merge({},q.value,T.extraParams)));function M(){T.fetch?S.value.submit():_("submit",O.value)}return l((()=>T.fields),(e=>{const{modelValue:a}=T,t=F(e,_,a),{data:s,fields:o}=t;j.value=o,y.merge(q.value,s)}),{immediate:!0,deep:!0}),a({formRef:k,formValidate:()=>S.value.formValidate()}),(e,a)=>{const t=u("BaseFormItem"),s=u("el-form");return m(),r(s,g({class:"base-form f-fs-s-c f-1",model:q.value},P.value,{onKeyup:v(M,["enter"]),ref_key:"formRef",ref:k}),{default:d((()=>[f("div",{class:h(["all-hide-scroll",[j.value.length?"f-fs-fs-w":"f-c-c",e.autoFixedFoot&&"auto-fixed-foot"]])},[j.value.length?(m(!0),i(c,{key:0},n(j.value,((s,o)=>(m(),r(t,{className:`f-span-${s.span||e.span}`,field:s,pureText:s.pureText||e.pureText,modelValue:q.value[s.prop],"onUpdate:modelValue":e=>q.value[s.prop]=e,onChange:a[0]||(a[0]=(e,a)=>_("change",e,a)),key:void 0===s.key?o:s.key},{custom:d((({field:a})=>[p(e.$slots,a.prop,{field:a,form:q.value},void 0,!0)])),_:2},1032,["className","field","pureText","modelValue","onUpdate:modelValue"])))),128)):(m(),i(c,{key:1},[b("空空如也~")],64))],2),!e.pureText&&e.footer?(m(),r(V,{key:0,loading:e.loading,moreBtns:e.moreBtns,submitText:e.submitText,resetText:e.resetText,formRef:k.value,isOmit:e.isOmit,log:e.log,debug:e.debug,params:O.value,fetch:e.fetch,fetchSuccess:e.fetchSuccess,fetchFail:e.fetchFail,noSubmitProps:e.noSubmitProps,handleReq:e.handleReq,disabled:!j.value.length,onMoreBtns:a[1]||(a[1]=(e,a,t)=>_("moreBtns",e,a,t)),onSubmit:a[2]||(a[2]=e=>_("submit",e)),ref_key:"footerBtnsRef",ref:S},null,8,["loading","moreBtns","submitText","resetText","formRef","isOmit","log","debug","params","fetch","fetchSuccess","fetchFail","noSubmitProps","handleReq","disabled"])):x("",!0)])),_:3},16,["model"])}}}),[["__scopeId","data-v-4ddd8b16"]]);export{_ as default};
