import{M as e,aM as a,bJ as s,bI as t,aK as l,q as o,aR as r,aE as i,u as n,v as c,b3 as u,bc as p,s as d,af as m,F as b,bN as v,c2 as g,c1 as f,bP as x,bH as h}from"./index-f41eb58a.js";import{a as _}from"./user-9b3d8471.js";import w from"./CaptchaBtn-24801cfa.js";import{_ as k}from"./BaseIcon.vue_vue_type_script_lang-77c68e2c.js";const y={class:"page f-c-c"},T={class:"h1"},q={class:"box f-fs-c"},z={class:"wrap f-c-c-c"},j={class:"h2 f-0"},C=h(e({__name:"index",setup(e){var h;const C={login:{title:"登录",api:_,submitText:"登录"},regist:{title:"注册",api:_,submitText:"注册"},forget:{title:"忘记密码",api:_}},I=a("login"),L=s(),E=t(),F=a(!1),P={}.VITE_APP_TITLE;a((null==(h=E.query.redirect)?void 0:h.toString())??"/");const{login_account:S}=localStorage;let U=l({account:S||"",password:"",remember:!!S});const V=o((()=>[{prop:"account",label:"账号",required:!0,attrs:{showWordLimit:!1,slots:{prefix:{component:k,attrs:{name:"User",size:"24"}}}}},"login"!==I.value&&{prop:"yzm",label:"验证码",required:!0,class:"captcha-box",attrs:{maxlength:4,showWordLimit:!1,slots:{prefix:{component:k,attrs:{name:"Clock",size:"24"}},append:{component:w}}}},{prop:"password",label:"密码",valid:"password",required:!0,attrs:{slots:{prefix:{component:k,attrs:{name:"Lock",size:"24"}}}}},"regist"===I.value&&{prop:"confirmPsd",label:"确认密码",valid:"password",required:!0,rules:[{validator:B,trigger:"blur"}],attrs:{placeholder:"请再次输入密码",slots:{prefix:{component:k,attrs:{name:"Unlock",size:"24"}}}}},"login"===I.value&&{prop:"remember",label:"记住我",type:"checkbox",class:"rember",attrs:{size:"large"}}]));function B(e,a,s){a!==U.password?s(new Error("确认密码和密码需要保持一致")):s()}function M(e){const a={login:()=>function(e){F.value=!0,_(e).then((e=>{g(e),L.push("/"),f({type:"success",title:"登录成功",duration:2e3,dangerouslyUseHTMLString:!0,message:`欢迎回来，<b>${x()._title}</b>`})})).finally((()=>{F.value=!1}))}(e),regist:()=>{v.warning("注册功能暂未开通，敬请期待！")},forget:()=>{v.warning("找回密码功能暂未开通，敬请期待！")}};a[I.value]?a[I.value]():v.warning(`点击了${I.value}按钮`)}return(e,a)=>{const s=r("BaseForm");return i(),n("div",y,[c("h1",T,u(p(P)),1),c("div",q,[c("div",z,[c("h2",j,u(C[I.value].title),1),(i(),d(s,{class:"form f-0",modelValue:p(U),"onUpdate:modelValue":a[0]||(a[0]=e=>m(U)?U.value=e:U=e),fields:V.value,submitText:C[I.value].submitText,loading:F.value,autoFixedFoot:!1,onSubmit:M,key:I.value},null,8,["modelValue","fields","submitText","loading"]))]),"login"===I.value?(i(),n(b,{key:0},[c("div",{onClick:a[1]||(a[1]=e=>I.value="regist"),class:"btns f-c-c blue"},"去注册"),c("div",{onClick:a[2]||(a[2]=e=>I.value="forget"),class:"btns f-c-c"},"忘记密码")],64)):(i(),n("div",{key:1,onClick:a[3]||(a[3]=e=>I.value="login"),class:"btns f-c-c"},"去登录"))])])}}}),[["__scopeId","data-v-6b1bab7c"]]);export{C as default};
