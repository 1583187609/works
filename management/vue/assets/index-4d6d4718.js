import{M as g,bO as y,aa as E,aM as D,aR as P,aE as U,s as O,bc as T,cQ as d,cR as v}from"./index-0bf49a0e.js";import{P as C,D as L,h as S,f as R}from"./user-77be9afe.js";import{_ as c}from"./AddEdit.vue_vue_type_script_setup_true_lang-0bd143ed.js";import"./UploadAvatar-57d6cbd6.js";import"./avatar-810e7140.js";const G=g({__name:"index",setup(W){const{getOpts:n}=y(),u=n("Sex"),b=n("UserType"),f=n("Enable"),o=E("openPopup"),m=D([{prop:"id",label:"用户ID"},{prop:"name",label:"用户姓名"},{prop:"age",label:"年龄",type:"BaseNumberRange"},{prop:"sex",label:"性别",type:"select",options:u},{prop:"type",label:"用户类型",type:"select",options:b},{prop:"status",label:"账号状态",type:"select",options:f}]),p=[{prop:"id",label:"用户ID",width:70},{prop:"name",label:"用户姓名",width:90},{prop:"sex_text",label:"性别",width:90,sortable:!0},{prop:"age",label:"年龄",width:90,sortable:!0},{prop:"address_text",label:"地址",minWidth:250},{prop:"phone",label:"电话",minWidth:120},{prop:"type_text",label:"用户类型",minWidth:90},{prop:"status",label:"状态",type:"BaseTag"}];function h(e,t,s){d({edit:()=>l(t,s),view:()=>_(t),delete:()=>i([t.id],s),forbid:()=>r(t,s),enable:()=>r(t,s)},e)}function x(e,t,s){d({add:()=>l(null,s),delete:()=>i(t,s),export:()=>B(t,s)},e)}function l(e,t){o(e?"编辑":"新增",{component:c,attrs:{id:e==null?void 0:e.id,refreshList:t}})}function _(e){o("查看",{component:c,attrs:{id:e.id,pureText:!0}})}function i(e,t){L({ids:e}).then(s=>{t()})}function B(e,t){S({ids:e,cols:p}).then(s=>{v(s,"用户列表"),t()})}function r(e,t){const{status:s,id:a}=e;R({id:a,status:s===1?2:1}).then(k=>{t()})}return(e,t)=>{const s=P("BaseCrud");return U(),O(s,{cols:p,fields:m.value,fetch:T(C),extraBtns:["add",{name:"add",text:"新增（url)",to:"/user/detail"},,"delete","import","export"],groupBtns:["edit",{name:"edit",text:"编辑（url)",to:a=>`/user/detail?id=${a.id}`},"delete",a=>(a==null?void 0:a.status)===1?"forbid":"enable","view"],onExtraBtn:x,onGroupBtn:h,selection:"",index:"",sort:""},null,8,["fields","fetch","groupBtns"])}}});export{G as default};
