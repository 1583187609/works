import{M as A,ak as N,c8 as T,q as h,u,s as m,t as q,F as S,aP as _,aa as D,aR as d,aE as c,ao as L,bx as M,I as R,am as V,cv as K,cw as W,cx as G}from"./index-0bf49a0e.js";import{g as H}from"./index-2f1ff7f6.js";import{_ as J}from"./SetTable.vue_vue_type_script_setup_true_lang-5bb84230.js";import Q from"./SetPrint-cc88f223.js";import{_ as U}from"./BatchBtns.vue_vue_type_script_setup_true_lang-978e4cea.js";const X={class:"extra-btns f-fs-c-w"};var g,y,b;const oe=A({__name:"Index",props:N({columns:{},allColumns:{},btns:{},toolBtns:{},total:{},isEmpty:{type:Boolean},batchBtn:{type:Boolean},size:{},allSelection:{type:Function},clearSelection:{type:Function},invertSelection:{type:Function}},Object.assign({columns:()=>[],allColumns:()=>[],btns:()=>[],toolBtns:()=>["set"]},(b=(y=(g=T)==null?void 0:g.BaseCrud)==null?void 0:y._components)==null?void 0:b.ExtraBtns)),emits:["click","toolBtn","update:cols"],setup(k,{emit:z}){const w={print:{name:"print",title:"打印",attrs:{type:"primary",icon:W,plain:!0,circle:!0}},set:{name:"colSet",title:"设置",attrs:{type:"primary",icon:G,plain:!0,circle:!0}}},i=k,p=z,f=D("openPopup"),v=h(()=>{const e=i.btns.map(s=>H(s));return K(e),e}),E=h(()=>i.toolBtns.map(e=>w[e]));function I(e){p("click",e)}function P(e){e==="colSet"?B():e==="print"&&f("打印设置",Q,"dialog")}function F(e,s,o){const{columns:n,allColumns:l}=i;if(s){let t=-1;n.findIndex((a,r)=>{const C=l.findIndex(x=>x.prop===a.prop);if(C>o)return t=r,!0;if(C<o)return r===n.length-1?(t=n.length,!0):!1}),n.splice(t,0,l[o])}else{const t=n.findIndex(a=>a.prop===e);n.splice(t,1)}p("update:cols",n.slice())}function O(e,s,o){console.log(e,s,o,"ddddd--------------------")}function $(e,s,o){console.log(e,s,o,"ddddd--------------------")}function B(){const{columns:e,allColumns:s}=i,o=s.filter(n=>{var l;return!((l=n.prop)!=null&&l.startsWith("$"))}).map(n=>{const{prop:l,label:t,sortable:a=!1}=n;return{colName:t,colProp:l,isShow:!!e.find(r=>r.prop===l),isExport:!0,isOrder:a}});f("列设置",{component:J,attrs:{rows:o,size:i.size,handleShowChange:F,handleExportChange:O,handleOrderChange:$,handleResetColSet:j}},"drawer")}function j(){p("update:cols",i.allColumns.slice()),setTimeout(()=>{B()})}return(e,s)=>{const o=d("BaseBtn"),n=d("el-button"),l=d("el-tooltip");return c(),u("div",X,[e.batchBtn?(c(),m(U,{key:0,class:"mr-12",allSelection:e.allSelection,clearSelection:e.clearSelection,invertSelection:e.invertSelection,size:e.size,disabled:!e.total},null,8,["allSelection","clearSelection","invertSelection","size","disabled"])):q("",!0),(c(!0),u(S,null,_(v.value,(t,a)=>(c(),m(o,{onClick:r=>I(t),class:L(e.size==="small"?"mb-q":"mb-h"),name:t,size:e.size,key:a},null,8,["onClick","class","name","size"]))),128)),(c(!0),u(S,null,_(E.value,(t,a)=>(c(),m(l,{content:t.title,"show-after":500,key:a},{default:M(()=>[R(n,V({style:{marginLeft:a===0?"auto":void 0},size:e.size,onClick:r=>P(t.name)},t.attrs),null,16,["style","size","onClick"])]),_:2},1032,["content"]))),128))])}}});export{oe as _};
