import e from"./AddDelBtn-2eb941d7.js";import{M as a,q as l,aK as s,aM as t,bs as u,aR as o,aE as r,u as d,aP as p,F as i,s as m,am as n,I as f,bZ as c,bN as v,cb as V,bH as g}from"./index-31bd5f7b.js";import{g as x,h as b}from"./_utils-595c60d1.js";const h=g(a({__name:"GroupList",props:{modelValue:{},parentProp:{default:""},fields:{default:()=>[]},pureText:{type:Boolean}},emits:["update:modelValue","change"],setup(a,{emit:g}){const h=a,y=g,P=x(h.fields),T=l({get:()=>h.modelValue,set(e){y("update:modelValue",e)}}),_=s({}),j=t([]);function k(e,a){if("add"===e){if(function(){const e=Object.values(T.value.slice(-1)[0]);return!e.length||e.some((e=>V.includes(e)))}())return void v.error("请将最后一项填写完毕后，再新增！");T.value.push(JSON.parse(JSON.stringify(P)))}else{if("del"!==e)throw new Error(`暂不支持${e}类型`);T.value.splice(a,1)}}return u((()=>h.fields),(e=>{const{modelValue:a}=h,l=b(e,y,a),{data:s,fields:t}=l;c.merge(_,s),j.value=t}),{immediate:!0}),u((()=>h.modelValue),(e=>{c.merge(_,e)}),{immediate:!1,deep:!0}),u(_,(e=>{c.merge(h.modelValue,e)}),{immediate:!1,deep:!0}),(a,l)=>{const s=o("BaseFormItem");return r(!0),d(i,null,p(T.value,((l,t)=>(r(),d("div",{class:"group-item f-fs-fs-w",key:t},[(r(!0),d(i,null,p(j.value,((e,l)=>(r(),m(s,n({prefixProp:`${a.parentProp}[${t}].`,field:e,pureText:e.pureText||a.pureText,modelValue:T.value[t][e.prop],"onUpdate:modelValue":a=>T.value[t][e.prop]=a},e,{key:l}),null,16,["prefixProp","field","pureText","modelValue","onUpdate:modelValue"])))),128)),f(e,{onClick:e=>k(e,t),type:t<T.value.length-1?"del":"add"},null,8,["onClick","type"])])))),128)}}}),[["__scopeId","data-v-4dae5fe8"]]);export{h as default};
