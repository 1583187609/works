import{M as V,aM as l,ax as N,aR as d,aE as f,s as $,bx as z,v as n,ao as q,b3 as m,aq as y,bc as B,cn as M,u as w,I as _,t as H,aQ as P,bH as Q}from"./index-346f95fe.js";const Y={key:0,class:"f-c-c load-tips"},j={class:"text"},x={key:1,class:"f-c-c load-tips"},A={class:"text"},b=2e3,F=V({__name:"LoadMore",props:{topDistance:{default:150},bottomDistance:{default:150},loading:{type:Boolean},paddingTop:{default:0},paddingBottom:{default:0},debounceDelay:{default:300},noMoreTips:{default:"没有更多啦~"},topHasMore:{type:Boolean,default:!0},loadTips:{default:"玩命加载中…"},emptyTips:{default:"换个姿势搜搜看~"}},emits:["reachTop","reachBottom"],setup(D,{expose:R,emit:k}){let t=null;const C=D,h=k,c=l(!1),E=l(!1),o=l(null),r=l(!1),v=l(!1);N(()=>{var a;if(!((a=o==null?void 0:o.value)!=null&&a.wrapRef))return;const{scrollHeight:e,clientHeight:s}=o.value.wrapRef;E.value=e>s});function L(e){var g;if(!((g=o==null?void 0:o.value)!=null&&g.wrapRef))return;const{scrollTop:s,scrollHeight:a,clientHeight:i}=o.value.wrapRef;if(a<=i)return;const{deltaY:u}=e;c.value=u>0;const{topDistance:I,bottomDistance:S,debounceDelay:T}=C;if(c.value){if(s+i+S+1>=a){t&&clearTimeout(t);const p=!t;t=setTimeout(function(){t=null},T),p&&(console.log("触底------"),h("reachBottom",e),v.value=!0,setTimeout(()=>{v.value=!1},b))}}else if(s<=I){t&&clearTimeout(t);const p=!t;t=setTimeout(function(){t=null},T),p&&(h("reachTop",e),r.value=!0,setTimeout(()=>{r.value=!1},b))}}return R({scrollToBottom(){const{scrollTop:e,scrollHeight:s,clientHeight:a}=o.value.wrapRef;s<=a||o.value.wrapRef.scrollTo(0,s)}}),(e,s)=>{const a=d("BaseIcon"),i=d("BaseEmpty"),u=d("el-scrollbar");return f(),$(u,{onMousewheelPassive:L,class:"load-more",ref_key:"boxRef",ref:o},{default:z(()=>[n("div",{class:q(["no-more-tips top f-c-c",{show:!e.topHasMore&&r.value}])},m(e.noMoreTips),3),n("div",{class:"space top",style:y(`height: ${B(M)(e.paddingTop)};`)},null,4),e.loading&&!c.value?(f(),w("div",Y,[_(a,{class:"rotate",name:"Loading"}),n("span",j,m(e.loadTips),1)])):H("",!0),P(e.$slots,"default",{},()=>[_(i,{tips:e.emptyTips},null,8,["tips"])],!0),n("div",{style:y(`height: ${B(M)(e.paddingBottom)};`)},null,4),e.loading&&c.value?(f(),w("div",x,[_(a,{class:"rotate",name:"Loading"}),n("span",A,m(e.loadTips),1)])):H("",!0)]),_:3},512)}}});const J=Q(F,[["__scopeId","data-v-f1c4500d"]]);export{J as default};
