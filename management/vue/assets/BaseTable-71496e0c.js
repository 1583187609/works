import{M,ak as re,c8 as ge,c2 as H,q as Q,u as b,F as $,aP as K,s as h,bx as C,bc as V,t as L,H as _,b3 as k,ao as ve,bJ as ce,aa as be,aR as B,aE as s,am as S,I as A,cx as Be,c4 as _e,cn as ke,bH as q,bO as Ce,v as c,ap as F,cr as X,cs as Te,cq as ie,cy as ue,aQ as pe,ci as D,cj as de,bN as me,c1 as w,cz as Se,cA as Y,ck as Z,cc as J,bW as Ae,cu as $e,cB as Oe,c7 as Ve,aM as x,aK as Ne,bt as je,a3 as Ee}from"./index-bd59ce9f.js";import{g as fe}from"./index-f6c75c60.js";import{g as ee}from"./cascader-6da630bc.js";import{_ as Ie}from"./BaseRender.vue_vue_type_script_setup_true_lang-410bde7c.js";var te,se,oe;const Le=M({__name:"GroupBtns",props:re({btns:{},row:{},maxNum:{},vertical:{type:Boolean},emptyStr:{}},Object.assign({btns:()=>[],maxNum:ge,emptyStr:"-"},(oe=(se=(te=H)==null?void 0:te.BaseCrud)==null?void 0:se._components)==null?void 0:oe.GroupBtns)),emits:["click"],setup(y,{emit:a}){const l={size:"small",plain:!0,text:!0},i=ce(),d=be("closePopup"),v=y,m=a;let e=!1;const n=Q(()=>{var t;return((t=v.btns)==null?void 0:t.length)>v.maxNum}),u=Q(()=>{var f;const{maxNum:t}=v,g=((f=v.btns)==null?void 0:f.map(p=>fe(p)))||[];return _e(g),e=!g.slice(t-1).some(p=>p.popconfirm),g});function r(t){const{name:g,text:f,to:p}=t;p?i.push(p):m("click",t,(T=`${f||"操作"}成功！`,j,I)=>{ke(T),d(j),I==null||I()})}return(t,g)=>{const f=B("BaseBtn"),p=B("el-button"),T=B("el-dropdown-item"),j=B("el-dropdown-menu"),I=B("el-dropdown");return s(),b("div",{class:ve(["group-btns",t.vertical?"f-c-c-c":"f-c-c"])},[(s(!0),b($,null,K(u.value.slice(0,n.value?t.maxNum-1:t.maxNum),(E,o)=>(s(),h(f,S({class:{"ml-0-i":t.vertical},name:E,data:t.row,onClick:O=>r(E)},l,{key:o}),null,16,["class","name","data","onClick"]))),128)),n.value?(s(),h(I,{key:0,class:"ml-12",trigger:V(e)?"hover":"click","hide-on-click":V(e)},{dropdown:C(()=>[A(j,null,{default:C(()=>[(s(!0),b($,null,K(u.value.slice(t.maxNum-1),(E,o)=>(s(),h(T,{key:o},{default:C(()=>[A(f,S({name:E,data:t.row,onClick:O=>r(E)},l),null,16,["name","data","onClick"])]),_:2},1024))),128))]),_:1})]),default:C(()=>[A(p,S({class:{"ml-0-i":t.vertical},icon:V(Be),type:"primary"},l),{default:C(()=>[_(" 更多 ")]),_:1},16,["class","icon"])]),_:1},8,["trigger","hide-on-click"])):L("",!0),u.value.length?L("",!0):(s(),b($,{key:1},[_(k(t.emptyStr),1)],64))],2)}}});const We=q(Le,[["__scopeId","data-v-089421ca"]]),we={key:0,class:"user-info f-sb-s"},ze={class:"f-1 f-sb-s-c"},Fe={class:"f-fs-c"},Me={class:"f-0 mr-o"},Re={class:"f-sb-c"},Ge={class:"avatar-box f-0 mr-8"},Pe={class:"f-1 f-sb-s-c"},Ue={class:"f-sb-c"},De={class:"f-0 age"},Ke={class:"f-sb-c"},He={class:"f-0 item"},qe={class:"f-0 item"},Je={class:"f-fs-c"},Qe={class:"item f-0"},Xe={class:"item f-0"},Ye={class:"f-fs-fs"},Ze={class:"item f-0"},xe={class:"item f-0"},et={class:"f-fs-c"},tt={class:"item f-0"},st={class:"item f-0"},ot=M({__name:"UserInfo",props:{data:{default:()=>({})},simple:{type:Boolean}},setup(y){const a=ce(),{getOpts:l,getText:i}=Ce(),d=y;function v(e){const{companyStatus:n,schoolStatus:u}=e;let r=0;return n===0&&u===0?r=4:n===0?r=3:u===0?r=2:r=1,r}function m(){a.push({name:"userDetail",query:{id:d.data.id}})}return(e,n)=>{const u=B("BaseAvatar"),r=B("BaseCopy"),t=B("BaseTag"),g=B("el-popover");return e.data?(s(),b("div",we,[e.simple?(s(),b($,{key:0},[A(u,{class:"avatar simple f-0 mr-8",src:e.data.avatar,gender:e.data.gender},null,8,["src","gender"]),c("div",ze,[c("b",{onClick:m,class:"nickname line-1"},k(e.data.nickname||"-"),1),c("div",Fe,[c("div",Me,[_("ID："),A(r,{text:e.data.id,line:"1"},null,8,["text"])]),A(t,{class:"f-0 sex",name:"Sex",value:e.data.gender,size:"small",pureText:""},null,8,["value"])]),c("div",Re,[A(t,{class:"f-0",name:"AccountStatus",value:e.data.accountStatus,size:"small"},null,8,["value"]),A(t,{class:"f-0",name:"AuthCase",value:v(e.data),size:"small"},null,8,["value"])])])],64)):(s(),b($,{key:1},[c("div",Ge,[e.data.companyStatus===0?(s(),h(g,{key:0,"show-after":200,"hide-after":0,trigger:"hover"},{reference:C(()=>[A(t,{class:"company",name:"AuthCase",value:"3"},{default:C(()=>[_("公司")]),_:1})]),default:C(()=>[c("div",null,k(e.data.companyName),1)]),_:1})):L("",!0),A(u,{class:"avatar",src:e.data.avatar,gender:e.data.gender},null,8,["src","gender"]),e.data.schoolStatus===0?(s(),h(g,{key:1,"show-after":200,"hide-after":0,trigger:"hover"},{reference:C(()=>[A(t,{class:"education",name:"AuthCase",value:"2"},{default:C(()=>[_("学历")]),_:1})]),default:C(()=>[c("div",null,k(V(i)("Education",e.data.schoolCertificateLevel)||"-"),1)]),_:1})):L("",!0)]),c("div",Pe,[c("div",Ue,[c("b",{onClick:m,class:"nickname line-1"},k(e.data.nickname||"-"),1),A(t,{class:"f-0 sex",name:"Sex",value:e.data.gender,size:"small",pureText:""},null,8,["value"]),c("span",De,k(e.data.age||"0")+"岁",1),A(t,{class:"f-0 ml-h mr-a",name:"MatrimonyStatus",value:e.data.singleType,size:"small",pureText:""},null,8,["value"]),A(t,{class:"f-0",name:"AccountStatus",value:e.data.accountStatus,size:"small"},null,8,["value"])]),c("div",Ke,[c("div",He,[_("ID："),A(r,{text:e.data.id,line:"1"},null,8,["text"])]),c("div",qe,[_(" 学号："),A(r,{text:e.data.userCode,line:"1"},null,8,["text"])])]),c("div",Je,[c("div",Qe,[_(" 学历："),c("b",null,k(V(i)("Education",e.data.schoolCertificateLevel)||"-"),1)]),c("div",Xe,[_(" 学校："),c("b",null,k(e.data.schoolName||"-"),1)])]),c("div",Ye,[c("div",Ze,[_(" 职业："),c("b",null,k(e.data.jobName||"-"),1)]),c("div",xe,[_(" 收入："),c("b",null,k(e.data.incomeTypeName||"-"),1)])]),c("div",et,[c("div",tt,[_(" 现居地："),c("b",null,k(V(ee)("Region",e.data.liveCity)||"-"),1)]),c("div",st,[_(" 家乡："),c("b",null,k(V(ee)("Region",e.data.city)||"-"),1)])])])],64))])):L("",!0)}}});const at=q(ot,[["__scopeId","data-v-e1a8a0a9"]]),nt=M({__name:"CustomSpecialTableCols",props:{col:{},row:{}},setup(y){return(a,l)=>a.col.type==="UserInfo"?(s(),h(at,S({key:0,data:a.row[a.col.prop]},a.col.attrs),null,16,["data"])):L("",!0)}});var ae,ne,le;const lt=M({__name:"Column",props:re({col:{},disabled:{type:Boolean},selection:{type:Boolean},refreshList:{type:Function},groupBtnsAttrs:{},getGroupBtnsOfRow:{type:Function}},Object.assign({},(le=(ne=(ae=H)==null?void 0:ae.BaseCrud)==null?void 0:ne._components)==null?void 0:le.Column)),emits:["groupBtn"],setup(y,{emit:a}){const l=y,i=a;function d(e,{row:n,col:u,$index:r},t){i("groupBtn",e,{row:n,col:u,$index:r},t)}function v(e,n){return de.includes(e[n])?"-":e[n]}function m(e,n,u){const{attrs:r={}}=e,{fetch:t,idKeys:g=["id","id"],statusKey:f="status"}=r,p=(r==null?void 0:r.activeValue)===n[f]?"in":"";u!==-1&&(t==null||t({[g[0]]:n[g[1]],[f]:r==null?void 0:r[p+"activeValue"]}).then(()=>{var T;me.success(`${r==null?void 0:r[p+"activeText"]}成功`),(T=l.refreshList)==null||T.call(l)}))}return(e,n)=>{var E;const u=B("el-table-column"),r=B("Column",!0),t=B("BaseIcon"),g=B("el-popover"),f=B("el-switch"),p=B("BaseTag"),T=B("BaseImg"),j=B("BaseView"),I=B("BaseCopy");return e.col.type&&["index","selection"].includes(e.col.type)?(s(),h(u,F(S({key:0},e.col)),null,16)):(s(),b($,{key:1},[(E=e.col.children)!=null&&E.length?(s(),h(u,S({key:0},V(X)(e.col,["children"]),{"reserve-selection":e.selection}),{default:C(()=>{var o;return[(s(!0),b($,null,K((o=e.col)==null?void 0:o.children,(O,N)=>(s(),h(r,{col:O,selection:e.selection,refreshList:e.refreshList,groupBtnsAttrs:e.groupBtnsAttrs,getGroupBtnsOfRow:e.getGroupBtnsOfRow,disabled:e.disabled,key:N},null,8,["col","selection","refreshList","groupBtnsAttrs","getGroupBtnsOfRow","disabled"]))),128))]}),_:1},16,["reserve-selection"])):(s(),b($,{key:1},[e.col.formatter?(s(),h(u,S({key:0},e.col,{formatter:e.col.formatter,"reserve-selection":e.selection}),null,16,["formatter","reserve-selection"])):(s(),h(u,S({key:1},e.col,{"reserve-selection":e.selection}),{header:C(({column:o,$index:O,store:N})=>[_(k(o.label)+" ",1),e.col.popover?(s(),h(g,F(S({key:0},V(Te)(e.col.popover))),{reference:C(()=>[A(t,{color:V(ie).colorInfo,class:"icon-popover",name:"QuestionFilled"},null,8,["color"])]),_:1},16)):L("",!0)]),default:C(({row:o,column:O,$index:N})=>{var R,G,P,z;return[e.col.type?e.col.type==="operate"?(s(),h(We,S({key:1,row:{...o,$index:N},btns:(R=e.getGroupBtnsOfRow)==null?void 0:R.call(e,o,N)},e.groupBtnsAttrs,{onClick:(W,he)=>d(W,{row:o,col:e.col,$index:N},he)}),null,16,["row","btns","onClick"])):e.col.type==="sort"?(s(),h(t,{key:2,class:"sort-icon",name:"Sort",size:"1em"})):["id","remark"].includes(e.col.type)?(s(),b($,{key:3},[_(k((o==null?void 0:o[e.col.prop])||"-"),1)],64)):e.col.type==="custom"?pe(e.$slots,"custom",F(S({key:4},{row:o,col:e.col,ind:N}))):["create","update"].includes(e.col.type)?(s(),b($,{key:5},[(G=e.col.prop)!=null&&G.includes(V(D))?(s(),b($,{key:0},[c("div",null,k((o==null?void 0:o[e.col.prop.split(V(D))[0]])||"-"),1),c("div",null,k((o==null?void 0:o[e.col.prop.split(V(D))[1]])||"-"),1)],64)):(s(),b($,{key:1},[_(k((o==null?void 0:o[e.col.prop])||"-"),1)],64))],64)):e.col.type==="switch"?(s(),b($,{key:6},[(z=(P=e.col)==null?void 0:P.attrs)!=null&&z.fetch?(s(),h(f,S({key:0,modelValue:o[e.col.prop]},V(X)(e.col.attrs,["onChange"]),{onChange:W=>m(e.col,o,N)}),null,16,["modelValue","onChange"])):(s(),h(f,S({key:1,modelValue:o[e.col.prop],"onUpdate:modelValue":W=>o[e.col.prop]=W},e.col.attrs),null,16,["modelValue","onUpdate:modelValue"]))],64)):e.col.type==="BaseTag"?(s(),h(p,S({key:7,value:o[e.col.prop]},e.col.attrs),null,16,["value"])):e.col.type==="BaseImg"?(s(),b($,{key:8},[o[e.col.prop]?(s(),h(T,S({key:0,style:{margin:"0 auto"},src:o[e.col.prop]},e.col.attrs),null,16,["src"])):(s(),b($,{key:1},[_("-")],64))],64)):e.col.type==="BaseView"?(s(),h(j,F(S({key:9},e.col.attrs)),{default:C(()=>[_(k(o[e.col.prop]||"-"),1)]),_:2},1040)):e.col.type==="BaseCopy"?(s(),h(I,S({key:10,text:o[e.col.prop]},e.col.attrs),null,16,["text"])):(s(),h(nt,{key:11,row:o,col:e.col},null,8,["row","col"])):(s(),b($,{key:0},[o[e.col.prop]===void 0?(s(),h(Ie,{key:0,data:V(ue)("属性为空")},null,8,["data"])):(s(),b($,{key:1},[_(k(v(o,e.col.prop)),1)],64))],64))]}),_:3},16,["reserve-selection"]))],64))],64))}}}),rt=["delete","export","pass","reject","repeal","enable","forbid","download"],ct=[void 0,"index","id","create","update","remark"];function vt({btnObj:y,cols:a,seledRows:l,seledKeys:i,total:d,exportLimit:v,emits:m,next:e}){const{name:n="",text:u,attrs:r,customRules:t}=y,g=(r==null?void 0:r.type)||"primary",f=`color${J.upperFirst(g)}`,p=ie[f];if(rt.includes(n)&&!t){const T=l.length===d,j=l.length>v;if(["export"].includes(n)&&j)me.warning({message:`单次${u}不能超过 <b>${v}</b> 条，请缩小查询范围！`,dangerouslyUseHTMLString:!0});else{const I=`确定 <b style="color:${p};">${u}${T?"全部</b> ？":"</b>"} 共 <b style="color:${p};">${l.length}</b> 条记录？`;Ae.confirm(I,"温馨提示",{type:n==="delete"?"error":"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:`el-button--${g}`,cancelButtonClass:`el-button--${g} is-plain`,draggable:!0}).then(()=>{const E=[];if(n==="export"){const o=(a==null?void 0:a.filter(O=>{var N;return w(O)!=="Object"?!1:!((N=O==null?void 0:O.prop)!=null&&N.startsWith("$"))}))||[];E.push(o.map(O=>O.label)),l.forEach(O=>{const N=[];o.forEach(R=>{const{prop:G,type:P,formatter:z}=R;let W="";ct.includes(P)&&(W=z?z(O):O[G]??""),N.push(W)}),E.push(N)})}m("extraBtn",n,i,e,l,E)}).catch(()=>{})}}else m("extraBtn",n,[],e,[],[])}function U(y,a){var d,v;const{groupBtns:l,cols:i=[]}=a;return y==="operate"?l&&((v=(d=i.slice(-1))==null?void 0:d[0])==null?void 0:v.type)!=="operate":a[y]&&!i.find(e=>e.type===y)}function bt(y,a){const{attrs:l,type:i=$e,options:d=[]}=y;return i==="cascader"?w(a)==="Array"?Se(d,a):Y(d,a):i==="select"?l!=null&&l.multiple?d.filter(m=>a.includes(m.value)).map(m=>m.label).join("、"):Y(d,a):i==="BaseNumberRange"?a==null?void 0:a.join(Z):i==="date-picker"?a==null?void 0:a.join(Z):a}function Bt(y,a,l){var m;const d=w(l)==="Function"?l(y,a):l;return((m=d==null?void 0:d.map(e=>fe(e,y)))==null?void 0:m.filter(e=>!!e.name))??[]}function it(y=1,a=20){var l,i;return Object.assign({index:{prop:"$index",label:"序号",type:"index",width:54,fixed:"left",index:d=>d+1+(y-1)*a},sort:{prop:"$sort",label:"排序",type:"sort",width:54,fixed:"left"},selection:{prop:"$selection",label:"选择",type:"selection",width:48,fixed:"left"},operate:{prop:"$operate",label:"操作",type:"operate",fixed:"right"},id:{prop:"id",label:"ID",minWidth:70,fixed:"left"},remark:{prop:"remark",label:"备注",minWidth:140},create:{prop:["createdName","createdAt"],label:"创建时间",minWidth:160},update:{prop:["updatedName","updatedAt"],label:"修改时间",minWidth:160},switch:{prop:"status",label:"启用状态",minWidth:80,attrs:{activeValue:1,inactiveValue:0,activeText:"启用",inactiveText:"禁用",inlinePrompt:!0}},BaseTag:{prop:"status",label:"状态",minWidth:90,attrs:{name:"Enable"}},BaseImg:{prop:"imgUrl",label:"图片",minWidth:136,attrs:{size:"120"}},BaseView:{prop:"content",label:"内容",minWidth:250}},(i=(l=H)==null?void 0:l.table)==null?void 0:i.customSpecialCol)}function ye(y,a=0,l,i,d){let v=a;const{children:m,type:e,prop:n,label:u,minWidth:r}=y,t=l[e],{getAttrs:g}=t||{},f=J.merge({},i,t,(u==null?void 0:u.includes("时间"))&&{minWidth:164,formatter:e!=="custom"&&typeof n=="string"?p=>typeof p[n]>"u"?ue("属性为空"):de.includes(p[n])||Oe===p[n]?"-":p[n]:void 0},g==null?void 0:g(y),y);if(w(f.prop)==="Array"&&(f.prop=f.prop.join(D)),d){const{width:p,minWidth:T}=f;p&&(f.width-=20),T&&(f.minWidth-=20)}return m!=null&&m.length&&(f.children=m.map(p=>{if(w(p)!=="Object")return 0;const{col:T,level:j}=ye(p,a++,l,i);return j>v&&(v=j),T})),{col:f,level:v}}const ut={rowKey:"id",border:!0,tableLayout:"auto",highlightCurrentRow:!0,defaultExpandAll:!1},pt={align:"center",headerAlign:"center"},_t={background:!0,layout:"total, sizes, prev, pager, next, jumper"},dt=M({__name:"BaseTable",props:{cols:{default:()=>[]},rows:{default:()=>[]},total:{},pageAttrs:{},sort:{type:Boolean},index:{type:Boolean},selection:{type:Boolean},sortable:{type:Boolean},showSummary:{type:Boolean},summaryMethod:{type:Function,default:Ve}},setup(y,{expose:a}){const l=it(),i=y,d=x(),v=Ne(J.merge({},ut)),m=x([]);return je(()=>{const{cols:n}=i;U("index",i)&&n.unshift(l.index),U("sort",i)&&n.unshift(l.sort),U("selection",i)&&n.unshift(l.selection),U("operate",i)&&n.push(l.operate),n.map(u=>{if(w(u)!=="Object")return 1;const{col:r,level:t}=ye(u,1,l,pt);return m.value.push(r),t})})(),a({tableRef:d}),(n,u)=>{const r=B("BaseEmpty"),t=B("el-table");return m.value.length?(s(),h(t,S({key:0,class:"base-table",data:n.rows},v,{ref_key:"tableRef",ref:d}),{empty:C(()=>[A(r)]),default:C(()=>[(s(!0),b($,null,K(m.value,(g,f)=>(s(),h(lt,{col:g,selection:n.selection,key:f},{custom:C(({row:p,col:T,ind:j})=>[pe(n.$slots,T.prop,F(Ee({row:p,col:T,$index:j})),void 0,!0)]),_:2},1032,["col","selection"]))),128))]),_:3},16,["data"])):L("",!0)}}});const mt=q(dt,[["__scopeId","data-v-7598b92b"]]),kt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));export{mt as B,lt as _,ye as a,ut as b,Bt as c,pt as d,_t as e,bt as f,it as g,vt as h,rt as i,kt as j,U as n};
