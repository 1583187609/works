import{l as e}from"./lodash-8dc1f9dc.js";import{t,F as n,G as o,r,k as s,q as l}from"./index-8cf28f90.js";import"./dayjs-21617033.js";import{g as a}from"./index-0a44dd7a.js";import{E as i,d as c}from"./element-plus-6dad9269.js";const u=["delete","export","pass","reject","repeal","enable","forbid","download"],p=[void 0,"index","id","create","update","remark"];function d({btnObj:n,cols:o,seledRows:r,seledKeys:l,total:a,exportLimit:d,emits:m,next:f}){const{name:b="",text:g,attrs:v,customRules:x}=n,h=(null==v?void 0:v.type)||"primary",y=`color${e.upperFirst(h)}`,j=s[y];if(u.includes(b)&&!x){const e=r.length===a,n=r.length>d;if(["export"].includes(b)&&n)i.warning({message:`单次${g}不能超过 <b>${d}</b> 条，请缩小查询范围！`,dangerouslyUseHTMLString:!0});else{const n=`确定 <b style="color:${j};">${g}${e?"全部</b> ":"</b>"} 共 <b style="color:${j};">${r.length}</b> 条记录？`;c.confirm(n,"温馨提示",{type:"delete"===b?"error":"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:`el-button--${h}`,cancelButtonClass:`el-button--${h} is-plain`,draggable:!0}).then((()=>{const e=[];if("export"===b){const n=(null==o?void 0:o.filter((e=>{var n;return"Object"===t(e)&&!(null==(n=null==e?void 0:e.prop)?void 0:n.startsWith("$"))})))||[];e.push(n.map((e=>e.label))),r.forEach((t=>{const o=[];n.forEach((e=>{const{prop:n,type:r,formatter:s}=e;let l="";p.includes(r)&&(l=s?s(t):t[n]??""),o.push(l)})),e.push(o)}))}m("extraBtn",b,l,f,r,e)})).catch((()=>{}))}}else m("extraBtn",b,[],f,[],[])}function m(e,t){var n,o;const{groupBtns:r,cols:s=[]}=t;if("operate"===e)return r&&"operate"!==(null==(o=null==(n=s.slice(-1))?void 0:n[0])?void 0:o.type);return t[e]&&!s.find((t=>t.type===e))}function f(e,s){const{attrs:a,type:i=l,options:c=[]}=e;if("cascader"===i)return"Array"===t(s)?n(c,s):o(c,s);if("select"===i){if(null==a?void 0:a.multiple){return c.filter((e=>s.includes(e.value))).map((e=>e.label)).join("、")}return o(c,s)}return"BaseNumberRange"===i||"date-picker"===i?null==s?void 0:s.join(r):s}function b(e,n,o){var r;const s="Function"===t(o)?o(e,n):o;return(null==(r=null==s?void 0:s.map((t=>a(t,e))))?void 0:r.filter((e=>!!e.name)))??[]}export{b as a,u as b,f as g,d as h,m as n};
