import"./dayjs-21617033.js";import{t as n,J as t,p as e,x as o}from"./index-8cf28f90.js";import{l as r}from"./lodash-8dc1f9dc.js";function l(t,e){if(!e)return;const{attrs:o,children:i}=t,{attrs:a,...s}=e;t.attrs=o?r.merge({},a,o):a,null==i||i.forEach((t=>{if("Object"!==n(t))return!1;l(t,e)})),r.merge(t,s,JSON.parse(JSON.stringify(t)))}function i(t){const e={};return null==t||t.map((t=>{if("Object"!==n(t))return;const{prop:o}=t;e[o]=void 0})),e}function a(r=[],s,d,c){const u={data:{},fields:[]};return r.forEach(((r,f)=>{if("Object"!==n(r))return null;const{type:p,prop:h,children:v}=r,g=n(h);if(t(r,d),"String"===g){let n=null==d?void 0:d[h];if("checkbox"===p&&void 0===n)n=!1;else if("addDel"===p)u.data[h]=(null==n?void 0:n.length)?n:[i(v)];else{const t=(null==v?void 0:v.length)?a(v,s,n).data:n;u.data[h]=t,void 0!==t&&(null==s||s("change",h,t))}}else if("Array"===g){const[n,t]=h,o=null==d?void 0:d[t],l=null==d?void 0:d[n],i=h.join(e),a=void 0===l&&void 0===o?void 0:[l,o];u.data[i]=a,r.prop=i,void 0!==a&&(null==s||s("change",i,a))}else{if("Undefined"!==g)throw new Error(`暂未处理prop为${g}类型的值`);if(!v)throw new Error("不能同时没有prop和children属性");if(v.length){const n={},t=v.map((t=>{const{prop:e}=t;return n[e]=null==d?void 0:d[e],e})).join(e),o=n;r.prop=t,u.data[t]=o,Object.keys(o).length&&(null==s||s("change",t,o))}}if(l(r,c),null==v?void 0:v.length){const t=o(v);null==v||v.forEach((e=>{if("Object"!==n(e))return!1;const o=e;void 0===o.labelWidth&&(o.labelWidth=t+"em")}))}u.fields.push(r)})),u}export{i as g,a as h};
