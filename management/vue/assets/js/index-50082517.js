import{d as e,o as a,c as t,a as o,U as s,e as l,j as n,n as r}from"./@vue-022d9836.js";import{_ as m,a6 as i,a7 as d}from"./index-8cf28f90.js";import{l as p}from"./lodash-8dc1f9dc.js";const u={class:"custom-option f-sb-c"},f={class:"f-1 line-one"},c={class:"f-0 short-name"},h=m(e({__name:"CompanyOption",props:{fullName:{},shortName:{}},setup:e=>(e,l)=>(a(),t("div",u,[o("div",f,s(e.fullName||"-"),1),o("div",c,s(e.shortName),1)]))}),[["__scopeId","data-v-71efd4d6"]]),v={school:{reqNameKey:"name",resValKey:"id",fetchApi:i,defaultField:{prop:"xx",label:"学校",type:"select"},handleItem(e){const{name:a,id:t}=e;return{label:a,value:t}}},company:{reqNameKey:"name",resValKey:"id",fetchApi:d,defaultField:{prop:"gs",label:"公司",type:"select"},handleItem(e){const{fullName:a,shortName:t,id:o}=e;return{label:a,customOption:{component:h,attrs:{fullName:a,shortName:t}},value:o}}}},y=()=>({getSearchOpts:function(e,a,t,o){if(!v[e])throw new Error(`不存在type为${e}的类型`);const{fetchApi:s,defaultField:m,handleItem:i,reqNameKey:d="name",resValKey:u="id",extraParams:f}=v[e],c=l(!1),h=l([]),y=n((()=>h.value.map(i)));function N(e="",a=!1){(e||a)&&(c.value=!!e,s({[d]:e,...f}).then((e=>{h.value=e||[]})).finally((()=>{c.value=!1})))}return t&&N(t),{...p.merge({},m,a),options:y,attrs:{filterable:!0,remote:!0,remoteShowSuffix:!0,defaultFirstOption:!0,onFocus:()=>N("",!0),remoteMethod:N,onChange:o?function(e){const a=h.value.find((a=>a[u]===e));r((()=>{o(e,a)}))}:void 0,loading:c}}}});export{y as u};
