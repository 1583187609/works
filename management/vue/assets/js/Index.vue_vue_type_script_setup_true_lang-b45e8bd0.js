var e,t,n;import{Q as l,R as s}from"./@element-plus-91223246.js";import"./dayjs-21617033.js";import{c as o,y as a}from"./index-8cf28f90.js";import"./lodash-8dc1f9dc.js";import{g as i}from"./index-0a44dd7a.js";import{_ as r}from"./SetTable.vue_vue_type_script_setup_true_lang-9a925c97.js";import c from"./SetPrint-879102cd.js";import{_ as p}from"./BatchBtns.vue_vue_type_script_setup_true_lang-9753f0d8.js";import{d as u,bd as m,j as d,o as f,c as v,O as h,S,F as _,a8 as y,B as b,ah as B,J as C,P as x,V as z,L as j}from"./@vue-022d9836.js";const g={class:"extra-btns f-fs-c-w"},k=u({name:"ExtraBtns",__name:"Index",props:m({columns:{},allColumns:{},btns:{},toolBtns:{},total:{},isEmpty:{type:Boolean},batchBtn:{type:Boolean},size:{},allSelection:{type:Function},clearSelection:{type:Function},invertSelection:{type:Function}},Object.assign({columns:()=>[],allColumns:()=>[],btns:()=>[],toolBtns:()=>["set"]},null==(n=null==(t=null==(e=o)?void 0:e.BaseCrud)?void 0:t._components)?void 0:n.ExtraBtns)),emits:["click","toolBtn","update:cols"],setup(e,{emit:t}){const n={print:{name:"print",title:"打印",attrs:{type:"primary",icon:l,plain:!0,circle:!0}},set:{name:"colSet",title:"设置",attrs:{type:"primary",icon:s,plain:!0,circle:!0}}},o=e,u=t,m=b("openPopup"),k=d((()=>{const e=o.btns.map((e=>i(e)));return a(e),e})),w=d((()=>o.toolBtns.map((e=>n[e]))));function E(e,t,n){const{columns:l,allColumns:s}=o;if(t){let e=-1;l.findIndex(((t,o)=>{const a=s.findIndex((e=>e.prop===t.prop));return a>n?(e=o,!0):a<n?o===l.length-1&&(e=l.length,!0):void 0})),l.splice(e,0,s[n])}else{const t=l.findIndex((t=>t.prop===e));l.splice(t,1)}u("update:cols",l.slice())}function O(e,t,n){}function F(e,t,n){}function I(){const{columns:e,allColumns:t}=o,n=t.filter((e=>{var t;return!(null==(t=e.prop)?void 0:t.startsWith("$"))})).map((t=>{const{prop:n,label:l,sortable:s=!1}=t;return{colName:l,colProp:n,isShow:!!e.find((e=>e.prop===n)),isExport:!0,isOrder:s}}));m({title:"列设置",closeOnClickModal:!0},{component:r,attrs:{rows:n,size:o.size,handleShowChange:E,handleExportChange:O,handleOrderChange:F,handleResetColSet:P}},"drawer")}function P(){u("update:cols",o.allColumns.slice()),setTimeout((()=>{I()}))}return(e,t)=>{const n=B("BaseBtn"),l=B("el-button"),s=B("el-tooltip");return f(),v("div",g,[e.batchBtn?(f(),h(p,{key:0,class:"mr-12",allSelection:e.allSelection,clearSelection:e.clearSelection,invertSelection:e.invertSelection,size:e.size,disabled:!e.total},null,8,["allSelection","clearSelection","invertSelection","size","disabled"])):S("",!0),(f(!0),v(_,null,y(k.value,((t,l)=>(f(),h(n,{onClick:e=>{u("click",t)},class:C("small"===e.size?"mb-q":"mb-h"),name:t,size:e.size,key:l},null,8,["onClick","class","name","size"])))),128)),(f(!0),v(_,null,y(w.value,((t,n)=>(f(),h(s,{content:t.title,"show-after":500,key:n},{default:x((()=>[z(l,j({style:{marginLeft:0===n?"auto":void 0},size:e.size,onClick:e=>{var n;"colSet"===(n=t.name)?I():"print"===n&&m("打印设置",c,"dialog")}},t.attrs),null,16,["style","size","onClick"])])),_:2},1032,["content"])))),128))])}}});export{k as _};
