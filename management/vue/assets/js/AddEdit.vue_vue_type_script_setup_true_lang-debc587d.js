import e from"./IconPicker-e46dfc2a.js";import{w as o,K as t}from"./index-8cf28f90.js";import{G as p,a,b as r}from"./auth-9cacae95.js";import s from"./MenuTree-698079ee.js";import"./dayjs-21617033.js";import"./lodash-8dc1f9dc.js";import{d as n,_ as i,j as l,ah as u,o as d,O as m,P as c,V as h,u as _,D as y}from"./@vue-022d9836.js";const b=n({name:"SystemMenuAddEdit",__name:"AddEdit",props:{data:{},menuTree:{},refreshList:{}},setup(n){var b;const{getOpts:f,getText:v}=o(),X=f("YesNoStatus"),g=f("EnableStatus"),j=f("MenuType"),q=n;let V=i(Object.assign({type:1,order:1,is_cache:1,is_link:0,is_blank_open:0,is_show:1,status:1,icon:t},q.data));const x=l((()=>{const e=V.type;return[{prop:"type",label:"菜单类型",required:!0,type:"radio-group",options:j,popover:"目录：XXXX；菜单：XXXX；按钮：XXXXX",attrs:{type:"button"}},{prop:"name",label:v("MenuType",e)+"名称",required:!0,attrs:{maxlength:10}},1===e&&{prop:"parent_id",label:"上级菜单",type:"custom",popover:"上级菜单"},2!==e&&{prop:"icon",label:"图标",type:"custom",required:!0},{prop:"order",label:"排序",required:!0,type:"input-number",popover:"数值越大越靠后",attrs:{style:"width: 205px",placeholder:"数值越小，越靠前"}},...1===e?[{prop:"component_path",label:"组件路径",required:!0,popover:"仅输入src/views后面的路径即可"},{prop:"menu_path",label:"路由地址",required:!0,example:"/auth",tips:"建议跟组件路径保持一致"},{prop:"is_cache",label:"是否缓存",type:"radio-group",required:!0,options:X,popover:"是否缓存该页面"},{prop:"is_show",label:"是否显示",type:"radio-group",required:!0,options:X,popover:"在菜单目录中是否可见"},{prop:"is_link",label:"是否外链",required:!0,type:"radio-group",span:12,options:X},1===V.is_link&&{prop:"is_blank_open",label:"新窗口打开",required:!0,type:"radio-group",span:12,options:X}]:[],...2===e?[{prop:"perms",label:"权限标识",attrs:{placeholder:"请输入权限标识，用,或，隔开（示例：0,1，2）"}}]:[],{prop:"status",label:"状态",required:!0,type:"radio-group",options:g}]}));function k(e,o){"component_path"===e&&(V.menu_path||(V.menu_path=o.replace(".vue","")))}return function(e){if(!e)return;p({id:e}).then((e=>{const{type:o}=e;2===o&&(e.type=1),3===o&&(e.type=2),Object.assign(V,e)}))}(null==(b=q.data)?void 0:b.id),(o,t)=>{const p=u("BaseForm");return d(),m(p,{modelValue:_(V),"onUpdate:modelValue":t[2]||(t[2]=e=>y(V)?V.value=e:V=e),style:{width:"600px"},fields:x.value,fetch:o.data?_(a):_(r),fetchSuccess:o.refreshList,onChange:k},{parent_id:c((()=>[h(s,{data:o.menuTree,modelValue:_(V).parent_id,"onUpdate:modelValue":t[0]||(t[0]=e=>_(V).parent_id=e)},null,8,["data","modelValue"])])),icon:c((({})=>[h(e,{modelValue:_(V).icon,"onUpdate:modelValue":t[1]||(t[1]=e=>_(V).icon=e)},null,8,["modelValue"])])),_:1},8,["modelValue","fields","fetch","fetchSuccess"])}}});export{b as _};
