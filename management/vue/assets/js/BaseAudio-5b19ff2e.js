import{d as e,e as o,o as s,c as a,I as t,a as l,T as i,S as u,J as r,ah as n,V as p,U as m,O as d,P as c}from"./@vue-022d9836.js";import{_ as v}from"./index-8cf28f90.js";import"./dayjs-21617033.js";import"./call-bind-ada3a9fc.js";import"./get-intrinsic-176af07e.js";import"./es-errors-c8ed318b.js";import"./has-symbols-456daba2.js";import"./has-proto-c2a23985.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-968dc075.js";import"./define-data-property-9d7bf764.js";import"./es-define-property-c2edbfb6.js";import"./gopd-16a4ddf0.js";import"./has-property-descriptors-52e43c9d.js";import"./lodash-8dc1f9dc.js";import"./xlsx-c1bdd32b.js";import"./element-plus-6dad9269.js";import"./lodash-es-d4f5f48c.js";import"./@vueuse-c70f8764.js";import"./@element-plus-91223246.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-3c499e77.js";import"./qs-fd29a741.js";import"./side-channel-5a41c40a.js";import"./object-inspect-0d550a97.js";import"./axios-86de682d.js";import"./pinia-f80f4126.js";import"./mock-ada1f893.js";import"./mockjs-217213d3.js";import"./vue-router-e17d6507.js";import"./nprogress-b5e58671.js";import"./vite-plugin-mock-6db8ade2.js";import"./path-to-regexp-83a43451.js";const j={class:"f-0 ml-h"},f=["muted"],g=["src"],h=["src"],y=v(e({name:"BaseAudio",__name:"BaseAudio",props:{src:{},showProgress:{type:Boolean,default:!0},default:{type:Boolean,default:!0}},setup(e,{expose:v}){const y=o(null),b=o(!1),x=o(0),T=o(!1),$=o("00:00/00:00"),k=o(!0);function w(e){const{currentTime:o,duration:s}=y.value;$.value=`${z(o)}/${z(s)}`,k.value=!s}function _(e){const{currentTime:o,duration:s}=y.value;$.value=`${z(o)}/${z(s)}`,x.value=o/s*100}function B(){b.value=!1,$.value=`00:00/${z(y.value.duration)}`}function C(e){const{duration:o}=y.value;y.value.currentTime=o*(e/100),I()}function M(e){const{duration:o}=y.value,s=o*(e/100);$.value=`${z(s)}/${z(o)}`,A()}function P(){b.value?A():I()}function V(){k.value||(T.value=!T.value)}function z(e){e=Math.round(e);return[Math.floor(e/60),e%60].map((e=>(e<10?"0":"")+e)).join(":")}function I(){k.value||(b.value=!0,y.value.play())}function A(){k.value||(b.value=!1,y.value.pause())}return v({playing:b,progress:x,timeStr:$,muted:T,play:I,pause:A,audioCtx:y,toggleMuted:V,formatTime:z}),(e,o)=>{var v,S;const q=n("BaseIcon"),E=n("el-slider"),J=n("el-tooltip");return s(),a("div",{class:r(["base-audio f-sb-c",{default:!e.$slots.default}])},[t(e.$slots,"default",{playing:b.value,muted:T.value,currentTime:(null==(v=y.value)?void 0:v.currentTime)||0,duration:(null==(S=y.value)?void 0:S.duration)||0,timeStr:$.value,progress:x.value,play:I,pause:A,togglePlaying:P,toggleMuted:V,formatTime:z},(()=>[p(q,{onClick:P,size:"20",class:r(["f-0 btn",{disabled:k.value}]),name:b.value?"VideoPause":"VideoPlay"},null,8,["class","name"]),l("time",j,m($.value),1),e.showProgress?(s(),d(E,{key:0,onChange:C,onInput:M,modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=e=>x.value=e),"show-tooltip":!1,disabled:k.value,class:"f-1 ml-o"},null,8,["modelValue","disabled"])):u("",!0),p(J,{content:T.value?"取消静音":"静音","show-after":400,disabled:k.value},{default:c((()=>[p(q,{onClick:V,size:"20",class:r(["btn f-0 ml-h",{disabled:k.value}]),name:T.value?"Mute":"Microphone"},null,8,["class","name"])])),_:1},8,["content","disabled"])]),!0),e.src?(s(),a("audio",{key:0,onCanplay:w,onTimeupdate:_,onEnded:B,muted:T.value,controls:"",hidden:"",ref_key:"audioRef",ref:y},[l("source",{src:e.src,type:"audio/mpeg"},null,8,g),l("source",{src:e.src,type:"audio/ogg"},null,8,h),i(" 您的浏览器不支持音频播放 ")],40,f)):u("",!0)],2)}}}),[["__scopeId","data-v-4cf71ee6"]]);export{y as default};
