import{M as e,aM as a,ax as t,aR as o,aE as l,s,bx as i,v as n,ao as u,b3 as c,aq as p,bc as d,cn as r,u as f,I as v,t as m,aQ as T,bH as g}from"./index-e84f6b3a.js";const h={key:0,class:"f-c-c load-tips"},y={class:"text"},b={key:1,class:"f-c-c load-tips"},B={class:"text"},H=g(e({__name:"LoadMore",props:{topDistance:{default:150},bottomDistance:{default:150},loading:{type:Boolean},paddingTop:{default:0},paddingBottom:{default:0},debounceDelay:{default:300},noMoreTips:{default:"没有更多啦~"},topHasMore:{type:Boolean,default:!0},loadTips:{default:"玩命加载中…"},emptyTips:{default:"换个姿势搜搜看~"}},emits:["reachTop","reachBottom"],setup(e,{expose:g,emit:H}){let w=null;const x=e,M=H,R=a(!1),D=a(!1),_=a(null),k=a(!1),I=a(!1);function L(e){var a;if(!(null==(a=null==_?void 0:_.value)?void 0:a.wrapRef))return;const{scrollTop:t,scrollHeight:o,clientHeight:l}=_.value.wrapRef;if(o<=l)return;const{deltaY:s}=e;R.value=s>0;const{topDistance:i,bottomDistance:n,debounceDelay:u}=x;if(R.value){if(t+l+n+1>=o){w&&clearTimeout(w);const a=!w;w=setTimeout((function(){w=null}),u),a&&(M("reachBottom",e),I.value=!0,setTimeout((()=>{I.value=!1}),2e3))}}else if(t<=i){w&&clearTimeout(w);const a=!w;w=setTimeout((function(){w=null}),u),a&&(M("reachTop",e),k.value=!0,setTimeout((()=>{k.value=!1}),2e3))}}return t((()=>{var e;if(!(null==(e=null==_?void 0:_.value)?void 0:e.wrapRef))return;const{scrollHeight:a,clientHeight:t}=_.value.wrapRef;D.value=a>t})),g({scrollToBottom(){const{scrollTop:e,scrollHeight:a,clientHeight:t}=_.value.wrapRef;a<=t||_.value.wrapRef.scrollTo(0,a)}}),(e,a)=>{const t=o("BaseIcon"),g=o("BaseEmpty"),H=o("el-scrollbar");return l(),s(H,{onMousewheelPassive:L,class:"load-more",ref_key:"boxRef",ref:_},{default:i((()=>[n("div",{class:u(["no-more-tips top f-c-c",{show:!e.topHasMore&&k.value}])},c(e.noMoreTips),3),n("div",{class:"space top",style:p(`height: ${d(r)(e.paddingTop)};`)},null,4),e.loading&&!R.value?(l(),f("div",h,[v(t,{class:"rotate",name:"Loading"}),n("span",y,c(e.loadTips),1)])):m("",!0),T(e.$slots,"default",{},(()=>[v(g,{tips:e.emptyTips},null,8,["tips"])]),!0),n("div",{style:p(`height: ${d(r)(e.paddingBottom)};`)},null,4),e.loading&&R.value?(l(),f("div",b,[v(t,{class:"rotate",name:"Loading"}),n("span",B,c(e.loadTips),1)])):m("",!0)])),_:3},512)}}}),[["__scopeId","data-v-f1c4500d"]]);export{H as default};
