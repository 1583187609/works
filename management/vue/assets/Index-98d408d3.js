import{co as j,ck as Y,cp as H,c2 as Ae,M as Ve,q as te,aK as Ue,aM as ae,bs as Q,aR as m,aE as l,u as g,aP as $,F as A,s as p,am as v,I as B,cc as z,bN as Pe,cj as Ie,bH as xe,bd as Fe,bx as k,aS as Ce,ap as X,bc as Z,cq as Se,ao as Ne,t as K,H as ee,b3 as L,bz as Re,bA as Ee,A as M,cr as ce,aQ as ze,v as Le,cs as Me,c1 as ve,ct as je,cu as fe}from"./index-8b36bd1b.js";import{A as Oe}from"./AddDelBtn-18088880.js";import{g as qe,h as He}from"./_utils-74d46e39.js";var be;const h=(be=Ae)==null?void 0:be.form;j([{text:"今天",value:new Date},{text:"昨天",value:()=>{const d=new Date;return d.setTime(d.getTime()-3600*1e3*24),d}},{text:"一周内",value:()=>{const d=new Date;return d.setTime(d.getTime()-3600*1e3*24*7),d}}],h==null?void 0:h.defaultDateShortcuts,"alert");const Ke=j([{text:"近一周",value:()=>{const d=new Date,c=new Date;return c.setTime(c.getTime()-3600*1e3*24*7),[c,d]}},{text:"近一个月",value:()=>{const d=new Date,c=new Date;return c.setTime(c.getTime()-3600*1e3*24*30),[c,d]}},{text:"近三个月",value:()=>{const d=new Date,c=new Date;return c.setTime(c.getTime()-3600*1e3*24*90),[c,d]}}],h==null?void 0:h.defaultDateRangeShortcuts,"alert"),ge=j({input:{attrs:{placeholder:"请输入${label}",clearable:!0,showWordLimit:!0}},select:{attrs:{style:{width:"100%"},clearable:!0,tagType:"primary",loadingText:"玩命加载中……",getAttrs(d){const{remote:c}=d.attrs||{};return{placeholder:c?"请输入关键字搜索${label}":"请选择${label}"}}}},cascader:{attrs:{style:{width:"100%"},placeholder:"请选择${label}",clearable:!0}},"date-picker":{attrs:{style:{width:"100%"},type:"daterange",rangeSeparator:Y,valueFormat:"YYYY-MM-DD",placeholder:"请选择${label}",clearable:!0,getAttrs(d){const{attrs:c={}}=d,{type:b}=c,n={};if(b.includes("range")){const o={date:"日期",month:"月份",datetime:"时间"};n.startPlaceholder=`开始${o[b.slice(0,-5)]}`,n.endPlaceholder=`结束${o[b.slice(0,-5)]}`,b==="daterange"&&(n.shortcuts=Ke)}return n}}},switch:{attrs:{activeValue:0,inactiveValue:1,activeText:"启用",inactiveText:"禁用",inlinePrompt:!0}},"checkbox-group":{attrs:{},options:[{label:"多选项1"}]},"radio-group":{attrs:{type:"button"},options:[{label:"单选项-error"}]},pureText:{attrs:{style:{"line-height":"22px","margin-top":"4px"}}},"input-number":{attrs:{placeholder:"${label}"}},slider:{attrs:{}},autocomplete:{attrs:{style:{width:"100%"},placeholder:"请输入${label}",clearable:!0,showWordLimit:!0,fetchSuggestions(d,c){c([{label:d,value:d}])}}},"time-picker":{attrs:{style:{width:"100%"},placeholder:"请选择${label}",rangeSeparator:Y,clearable:!0}},"time-select":{attrs:{style:{width:"100%"},placeholder:"请选择${label}",clearable:!0}},BaseNumberRange:{attrs:{style:{width:"100%"}}}},h==null?void 0:h.defaultFieldAttrs);j({},h==null?void 0:h.defaultPopoverAttrs);const ye=j({phone:{rules:[{pattern:H.phone,message:"请输入正确的11位电话号码",trigger:"blur"}],attrs:{maxlength:11}},password:{rules:[{min:6,message:"密码长度不能小于6位",trigger:"blur"},{pattern:H.password,message:"请输入正确的6~16位字母 + 数字组合密码",trigger:"blur"}],attrs:{type:"password",maxlength:16,showPassword:!0}},identity:{rules:[{min:15,message:"身份证号长度不能小于15位",trigger:"blur"},{pattern:H.identity,message:"请输入正确的15/18位身份证号",trigger:"blur"}],attrs:{maxlength:18}},email:{rules:[{pattern:H.email,message:"请输入正确的邮箱地址",trigger:"blur"}]},age:{type:"input-number",attrs:{min:0,max:100},after:"岁"}},h==null?void 0:h.defaultValidTypes),Ye=Ve({__name:"GroupList",props:{modelValue:{},parentProp:{default:""},fields:{default:()=>[]},pureText:{type:Boolean}},emits:["update:modelValue","change"],setup(d,{emit:c}){const b=d,n=c,o=qe(b.fields),U=te({get(){return b.modelValue},set(f){n("update:modelValue",f)}}),F=Ue({}),t=ae([]);Q(()=>b.fields,f=>{const{modelValue:S}=b,N=He(f,n,S),{data:O,fields:r}=N;z.merge(F,O),t.value=r},{immediate:!0}),Q(()=>b.modelValue,f=>{z.merge(F,f)},{immediate:!1,deep:!0}),Q(F,f=>{z.merge(b.modelValue,f)},{immediate:!1,deep:!0});function G(){const f=Object.values(U.value.slice(-1)[0]);return f.length?f.some(N=>Ie.includes(N)):!0}function J(f,S){if(f==="add"){if(G()){Pe.error("请将最后一项填写完毕后，再新增！");return}U.value.push(JSON.parse(JSON.stringify(o)))}else if(f==="del")U.value.splice(S,1);else throw new Error(`暂不支持${f}类型`)}return(f,S)=>{const N=m("BaseFormItem");return l(!0),g(A,null,$(U.value,(O,r)=>(l(),g("div",{class:"group-item f-fs-fs-w",key:r},[(l(!0),g(A,null,$(t.value,(e,s)=>(l(),p(N,v({prefixProp:`${f.parentProp}[${r}].`,field:e,pureText:e.pureText||f.pureText,modelValue:U.value[r][e.prop],"onUpdate:modelValue":y=>U.value[r][e.prop]=y},e,{key:s}),null,16,["prefixProp","field","pureText","modelValue","onUpdate:modelValue"]))),128)),B(Oe,{onClick:e=>J(e,r),type:r<U.value.length-1?"del":"add"},null,8,["onClick","type"])]))),128)}}});const Ge=xe(Ye,[["__scopeId","data-v-4dae5fe8"]]),Je={key:0,class:"mr-h"},We={class:"err"},Qe={key:15,class:"err"},Xe={key:16,class:"ml-h"},Ze=["innerHTML"],et={key:1,class:"f-fs-fs-w"},tt={name:"BaseFormItem",inheritAttrs:!1},at=Ve({...tt,props:{prefixProp:{default:""},field:{},pureText:{type:Boolean},modelValue:{},className:{},inputDebounce:{type:Boolean},size:{}},emits:["update:modelValue","change"],setup(d,{emit:c}){const b=d,n=c;Fe();const o=te({get(){return b.modelValue},set(r){n("update:modelValue",r)}}),U=ae(),F=ae([]),t=te(()=>{var E,q;const{prefixProp:r,field:e,size:s}=b,{type:y,label:V,valid:_="",children:w}=e,T=_?ye[_]:{},{type:C}=T,D=y||C||fe,x=ge[D],u=z.merge({type:D},x,T,e),P=((q=(E=u==null?void 0:u.attrs)==null?void 0:E.getAttrs)==null?void 0:q.call(E,u))||{};z.merge(u,{attrs:P},e),U.value=Me(u.popover),u.prop=`${r}${e.prop}`,w!=null&&w.length&&(F.value=w),u.rules=J(u,e.rules),u.attrs.placeholder=G(u);const{slots:R}=u.attrs;return ve(R)==="String"&&(u.attrs.slots={default:R}),s==="small"&&D==="date-picker"&&(u.labelWidth=V.length+.5+"em"),delete u.popover,delete u.children,u});function G(r){var V;const{label:e="",example:s}=r;let y=((V=r==null?void 0:r.attrs)==null?void 0:V.placeholder)??"";return y=y.replace("${label}",e),s&&(y+=`，例：${s}`),y}function J(r,e=[]){const{label:s="",valid:y,required:V,children:_}=r,T=[...(y?ye[y]:{}).rules||[],...V?[{required:V,message:s+"必填",trigger:"blur"}]:[],...e];return f(T)}function f(r=[]){let e=[];return r.forEach((s,y)=>{const V=["required","min","max","pattern","validator"],{type:_}=s,w=e.findIndex((T,C)=>{let D=!1;return _?D=T.type===_:D=!!V.find((x,u)=>s[x]!==void 0&&T[x]!==void 0),D});w===-1?e.push(s):e[w]=s}),e}function S(r,e){var T,C,D;const{type:s=fe,label:y,attrs:V={},options:_=[],after:w=""}=r;if(["select","radio-group"].includes(s))e=(T=_==null?void 0:_.find(x=>x.value===e))==null?void 0:T.label;else if(s.includes("Time")||s.includes("date")){const{format:x}=z.merge({},(C=ge[s])==null?void 0:C.attrs,V),u=ve(e)==="Array",P=` ${Y} `;b.pureText?e=u?e.join(P):e:e=u?e.map(R=>R.format(x)).join(P):e==null?void 0:e.format(x)}else if(s==="checkbox-group")e=(D=_==null?void 0:_.filter(x=>e.includes(x.value)))==null?void 0:D.map(x=>x.label).join("，");else if(s==="input-number")e=e?e+w:"-";else if(s==="switch"){const{activeText:x="是",inactiveText:u="否",activeValue:P}=V;e=P===e?x:u}else s==="checkbox"?e=e?"是":"否":s==="cascader"?e=je(V==null?void 0:V.options,e)||"-":s==="BaseNumberRange"?e=e.join(Y):s==="custom"&&(e="-");return{label:y,value:e}}function N(r,e){if(b.inputDebounce){const y=(r.querySelector("input")||r.querySelector("textarea")).value;n("change",e,y)}}function O(r,e){b.inputDebounce||n("change",e,r)}return(r,e)=>{const s=m("BaseRender"),y=m("BaseIcon"),V=m("el-popover"),_=m("el-input"),w=m("el-option"),T=m("el-select"),C=m("el-date-picker"),D=m("el-radio-button"),x=m("el-radio"),u=m("el-radio-group"),P=m("el-checkbox"),R=m("el-checkbox-group"),E=m("el-input-number"),q=m("el-switch"),_e=m("el-cascader"),ke=m("BaseNumberRange"),he=m("BaseUpload"),we=m("el-autocomplete"),Te=m("el-slider"),De=m("BaseFormItem"),Be=m("el-form-item"),$e=Ce("debounce");return l(),p(Be,v({class:"base-form-item"},t.value,{class:[r.className,t.value.labelHide&&"label-hide"]}),{label:k(()=>[B(s,{data:t.value.label},null,8,["data"]),U.value?(l(),p(V,X(v({key:0},U.value)),{reference:k(()=>[B(y,{color:Z(Se).colorInfo,class:Ne(["icon-popover",r.size]),name:"QuestionFilled"},null,8,["color","class"])]),_:1},16)):K("",!0)]),default:k(()=>{var le,se,oe,re,ne,ue,de,pe,ie,me;return[t.value.before?(l(),g("div",Je,[B(s,{data:t.value.before},null,8,["data"])])):K("",!0),F.value.length?(l(),g(A,{key:2},[t.value.type==="addDel"?(l(),p(Ge,{key:0,parentProp:t.value.prop,fields:F.value,pureText:r.pureText,modelValue:o.value,"onUpdate:modelValue":e[31]||(e[31]=a=>o.value=a)},null,8,["parentProp","fields","pureText","modelValue"])):(l(),g("div",et,[(l(!0),g(A,null,$(F.value,(a,i)=>(l(),p(De,v({prefixProp:t.value.prop+".",field:a,pureText:a.pureText||r.pureText,modelValue:o.value[a.prop],"onUpdate:modelValue":I=>o.value[a.prop]=I},a,{key:i}),null,16,["prefixProp","field","pureText","modelValue","onUpdate:modelValue"]))),128))]))],64)):(l(),g(A,{key:1},[t.value.pureText||r.pureText?(l(),g(A,{key:0},[ee(L(S(t.value,o.value).value??"-"),1)],64)):(l(),g(A,{key:1},[t.value.type==="input"?Re((l(),p(_,v({key:0,class:{"f-1":t.value.before||t.value.after},onClear:e[0]||(e[0]=a=>n("change",t.value.prop,"")),onKeyup:e[1]||(e[1]=Ee(a=>O(a.target.value,t.value.prop),["enter"])),modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value=a),modelModifiers:{trim:!0}},t.value.attrs),M({_:2},[$((se=(le=t.value)==null?void 0:le.attrs)==null?void 0:se.slots,(a,i)=>({name:i,fn:k(()=>[B(s,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])),[[$e,a=>N(a,t.value.prop),"input"]]):t.value.type==="select"?(l(),p(T,v({key:1,class:{"f-1":t.value.before||t.value.after},onChange:e[3]||(e[3]=a=>n("change",t.value.prop,a)),modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value=a)},t.value.attrs),M({default:k(()=>[(l(!0),g(A,null,$(t.value.options,(a,i)=>(l(),g(A,{key:i},[a!=null&&a.customOption?(l(),p(w,X(v({key:0},Z(ce)(a,["customOption"]))),{default:k(()=>[B(s,{data:a.customOption},null,8,["data"])]),_:2},1040)):(l(),p(w,X(v({key:1},a)),null,16))],64))),128))]),_:2},[$((re=(oe=t.value)==null?void 0:oe.attrs)==null?void 0:re.slots,(a,i)=>({name:i,fn:k(()=>[B(s,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])):t.value.type==="date-picker"?(l(),p(C,v({key:2,class:{"f-1":t.value.before||t.value.after},onChange:e[5]||(e[5]=a=>n("change",t.value.prop,a)),onClear:e[6]||(e[6]=a=>n("change",t.value.prop,"")),modelValue:o.value,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value=a)},t.value.attrs),M({_:2},[$((ue=(ne=t.value)==null?void 0:ne.attrs)==null?void 0:ue.slots,(a,i)=>({name:i,fn:k(()=>[B(s,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])):t.value.type==="radio-group"?(l(),p(u,v({key:3,onChange:e[8]||(e[8]=a=>n("change",t.value.prop,a)),modelValue:o.value,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value=a)},t.value.attrs),{default:k(()=>{var a,i;return[((i=(a=t.value)==null?void 0:a.attrs)==null?void 0:i.type)==="button"?(l(!0),g(A,{key:0},$(t.value.options,(I,W)=>(l(),p(D,{disabled:I.disabled,value:I.value,key:W},{default:k(()=>[ee(L(I.label),1)]),_:2},1032,["disabled","value"]))),128)):(l(!0),g(A,{key:1},$(t.value.options,(I,W)=>(l(),p(x,{disabled:I.disabled,value:I.value,key:W},{default:k(()=>[ee(L(I.label),1)]),_:2},1032,["disabled","value"]))),128))]}),_:1},16,["modelValue"])):t.value.type==="checkbox-group"?(l(),p(R,v({key:4,onChange:e[10]||(e[10]=a=>n("change",t.value.prop,a)),modelValue:o.value,"onUpdate:modelValue":e[11]||(e[11]=a=>o.value=a)},t.value.attrs),{default:k(()=>[(l(!0),g(A,null,$(t.value.options,(a,i)=>(l(),p(P,v({disabled:a.disabled,value:a.value},Z(ce)(a,["label"]),{name:t.value.prop,key:i}),{default:k(()=>[B(s,{data:a.label},null,8,["data"])]),_:2},1040,["disabled","value","name"]))),128))]),_:1},16,["modelValue"])):t.value.type==="input-number"?(l(),p(E,v({key:5,onChange:e[12]||(e[12]=a=>n("change",t.value.prop,a)),modelValue:o.value,"onUpdate:modelValue":e[13]||(e[13]=a=>o.value=a)},t.value.attrs),null,16,["modelValue"])):t.value.type==="switch"?(l(),p(q,v({key:6,onChange:e[14]||(e[14]=a=>n("change",t.value.prop,a)),modelValue:o.value,"onUpdate:modelValue":e[15]||(e[15]=a=>o.value=a)},t.value.attrs),null,16,["modelValue"])):t.value.type==="cascader"?(l(),p(_e,v({key:7,class:{"f-1":t.value.before||t.value.after},onChange:e[16]||(e[16]=a=>n("change",t.value.prop,a)),onClear:e[17]||(e[17]=a=>n("change",t.value.prop,"")),modelValue:o.value,"onUpdate:modelValue":e[18]||(e[18]=a=>o.value=a),options:t.value.options},t.value.attrs),M({_:2},[$((pe=(de=t.value)==null?void 0:de.attrs)==null?void 0:pe.slots,(a,i)=>({name:i,fn:k(()=>[B(s,{data:a},null,8,["data"])])}))]),1040,["class","modelValue","options"])):t.value.type==="custom"?ze(r.$slots,"custom",{key:8,field:t.value},()=>[Le("div",We," 【自定义】"+L(`${t.value.label}（${t.value.prop})`),1)],!0):t.value.type==="BaseNumberRange"?(l(),p(ke,v({key:9,class:{"f-1":t.value.before||t.value.after},onChange:e[19]||(e[19]=(a,i)=>n("change",a,i)),onClear:e[20]||(e[20]=(a,i)=>n("change",a,i)),size:r.size,modelValue:o.value,"onUpdate:modelValue":e[21]||(e[21]=a=>o.value=a)},t.value),null,16,["class","size","modelValue"])):t.value.type==="BaseUpload"?(l(),p(he,v({key:10,onChange:e[22]||(e[22]=a=>n("change",t.value.prop,a))},t.value.attrs,{modelValue:o.value,"onUpdate:modelValue":e[23]||(e[23]=a=>o.value=a)}),null,16,["modelValue"])):t.value.type==="autocomplete"?(l(),p(we,v({key:11,class:{"f-1":t.value.before||t.value.after},onChange:e[24]||(e[24]=a=>n("change",t.value.prop,a)),onClear:e[25]||(e[25]=a=>n("change",t.value.prop,"")),modelValue:o.value,"onUpdate:modelValue":e[26]||(e[26]=a=>o.value=a)},t.value.attrs),M({_:2},[$((me=(ie=t.value)==null?void 0:ie.attrs)==null?void 0:me.slots,(a,i)=>({name:i,fn:k(()=>[B(s,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])):t.value.type==="slider"?(l(),p(Te,v({key:12,class:{"f-1":t.value.before||t.value.after},onChange:e[27]||(e[27]=a=>n("change",t.value.prop,a)),modelValue:o.value,"onUpdate:modelValue":e[28]||(e[28]=a=>o.value=a)},t.value.attrs),null,16,["class","modelValue"])):t.value.type==="checkbox"?(l(),p(P,v({key:13,onChange:e[29]||(e[29]=a=>n("change",t.value.prop,a)),modelValue:o.value,"onUpdate:modelValue":e[30]||(e[30]=a=>o.value=a)},t.value.attrs),null,16,["modelValue"])):t.value.type==="empty"?(l(),g("div",v({key:14,class:"empty"},t.value.attrs),null,16)):(l(),g("div",Qe,"【不存在】"+L(t.value.type),1)),t.value.after?(l(),g("div",Xe,[B(s,{data:t.value.after},null,8,["data"])])):K("",!0)],64)),t.value.tips?(l(),g("div",{key:2,class:"show-tips",innerHTML:"注："+t.value.tips},null,8,Ze)):K("",!0)],64))]}),_:3},16,["class"])}}});const rt=xe(at,[["__scopeId","data-v-296222fd"]]);export{rt as default};
