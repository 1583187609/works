import f from"./IconPicker-982b35d3.js";import{M as y,bO as h,aK as _,q as g,aR as q,aE as V,s as v,bx as n,I as i,bc as r,af as M}from"./index-95e659d0.js";import{G as S,P as k,a as x}from"./auth-dfa667d1.js";import A from"./MenuTree-938d3d4f.js";const w=y({__name:"AddEdit",props:{id:{},refreshList:{}},setup(d){const{getOpts:s}=h();s("MenuType");const l=s("YesNoStatus"),c=s("Enable"),u=d;let o=_(u.id?{}:{type:1,order:1,is_cache:2,is_out_link:2,status:1});const m=g(()=>{const e=o.type||1;return[{prop:"type",label:"菜单类型",required:!0,type:"radio-group",options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"按钮",value:2}],attrs:{type:"button"}},{prop:"name",label:"菜单名称",required:!0},{prop:"parent_id",label:"上级菜单",type:"custom"},{prop:"order",label:"排序",required:!0,type:"input-number",attrs:{style:"width: 205px",placeholder:"数值越小，越靠前"}},...e===0?[[{prop:"icon",label:"图标",type:"custom"}]]:[],...e===1?[{prop:"component_path",label:"组件路径",required:!0},{prop:"menu_path",label:"路由地址",required:!0,example:"/auth"},{prop:"is_cache",label:"是否缓存",type:"radio-group",options:l},{prop:"is_out_link",label:"是否外链",type:"radio-group",options:l}]:[],...e===2?[{prop:"perms",label:"权限标识",attrs:{placeholder:"请输入权限标识，用,或，隔开（示例：0,1，2）"}}]:[],{prop:"status",label:"状态",required:!0,type:"radio-group",options:c}]});b(u.id);function b(e){e&&S({id:e}).then(t=>{const{type:p}=t;p===2&&(t.type=1),p===3&&(t.type=2),Object.assign(o,t)})}return(e,t)=>{const p=q("BaseForm");return V(),v(p,{modelValue:r(o),"onUpdate:modelValue":t[1]||(t[1]=a=>M(o)?o.value=a:o=a),style:{width:"600px"},fields:m.value,fetch:e.id?r(k):r(x),fetchSuccess:e.refreshList},{parent_id:n(()=>[i(A)]),icon:n(({})=>[i(f,{modelValue:r(o).icon,"onUpdate:modelValue":t[0]||(t[0]=a=>r(o).icon=a)},null,8,["modelValue"])]),_:1},8,["modelValue","fields","fetch","fetchSuccess"])}}});export{w as _};
