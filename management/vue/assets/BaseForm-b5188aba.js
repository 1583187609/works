import{a9 as w}from"./index-79ac556c.js";import{h as C}from"./_utils-eb832563.js";import{l as p}from"./common-f4827de9.js";import{F as q}from"./FooterBtns-f1b9b194.js";import{i as N,a as O}from"./system-a8d5b9ab.js";import{q as I,O as E,r as c,e as g,w as L,a6 as h,t as m,D as v,E as b,x as _,v as y,a0 as $,y as z,F,J as A,z as D,I as K,V as M}from"./runtime-core.esm-bundler-95bf9971.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-4a03ead4.js";import"./index-d2b43e08.js";const J=I({__name:"BaseForm",props:{modelValue:{default:()=>E({})},fields:{default:()=>[]},pureText:{type:Boolean},fetch:{},fetchSuccess:{},fetchFail:{},span:{default:24},footer:{type:Boolean,default:!0},submitText:{},resetText:{},extraParams:{},moreBtns:{},loading:{type:Boolean},isOmit:{type:Boolean,default:!0},log:{type:Boolean,default:!N},debug:{type:Boolean},isCache:{type:Boolean},autoFixedFoot:{type:Boolean,default:!0},noSubmitProps:{},handleReq:{}},emits:["update:modelValue","submit","change","moreBtns"],setup(T,{expose:V,emit:x}){const k={},l=T,a=x,B=c(null),u=c(),R=g(()=>{const e=O(l.fields);return p.merge({labelWidth:e+"em"},k)}),n=c([]),s=g({get(){return l.modelValue},set(e){a("update:modelValue",e)}}),d=g(()=>p.merge({},s.value,l.extraParams));return L(()=>l.fields,e=>{const{modelValue:o}=l,f=C(e,a,o),{data:i,fields:t}=f;n.value=t,p.merge(s.value,i)},{immediate:!0,deep:!0}),V({formRef:u,formValidate(){return B.value.formValidate()}}),(e,o)=>{const f=h("BaseFormItem"),i=h("el-form");return m(),v(i,M({class:"base-form f-fs-s-c f-1",model:s.value},R.value,{onKeyup:o[3]||(o[3]=w(t=>a("submit",d.value),["enter"])),ref_key:"formRef",ref:u}),{default:b(()=>[_("div",{class:D(["all-hide-scroll",[n.value.length?"f-fs-fs-w":"f-c-c",e.autoFixedFoot&&"auto-fixed-foot"]])},[n.value.length?(m(!0),y(F,{key:0},$(n.value,(t,S)=>(m(),v(f,{className:`f-span-${t.span||e.span}`,field:t,pureText:t.pureText||e.pureText,modelValue:s.value[t.prop],"onUpdate:modelValue":r=>s.value[t.prop]=r,onChange:o[0]||(o[0]=(r,P)=>a("change",r,P)),key:t.key===void 0?S:t.key},{custom:b(({field:r})=>[z(e.$slots,r.prop,{field:r,form:s.value},void 0,!0)]),_:2},1032,["className","field","pureText","modelValue","onUpdate:modelValue"]))),128)):(m(),y(F,{key:1},[A("空空如也~")],64))],2),!e.pureText&&e.footer?(m(),v(q,{key:0,loading:e.loading,moreBtns:e.moreBtns,submitText:e.submitText,resetText:e.resetText,formRef:u.value,isOmit:e.isOmit,log:e.log,debug:e.debug,params:d.value,fetch:e.fetch,fetchSuccess:e.fetchSuccess,fetchFail:e.fetchFail,noSubmitProps:e.noSubmitProps,handleReq:e.handleReq,disabled:!n.value.length,onMoreBtns:o[1]||(o[1]=t=>a("moreBtns",t,d.value)),onSubmit:o[2]||(o[2]=t=>a("submit",t)),ref_key:"footerBtnsRef",ref:B},null,8,["loading","moreBtns","submitText","resetText","formRef","isOmit","log","debug","params","fetch","fetchSuccess","fetchFail","noSubmitProps","handleReq","disabled"])):K("",!0)]),_:3},16,["model"])}}});const te=U(J,[["__scopeId","data-v-c065ecbd"]]);export{te as default};
