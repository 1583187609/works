import{M as k,aK as A,c3 as _,aM as B,q as F,cp as q,c8 as p,bs as w,aR as c,aE as r,s as g,bx as b,v as O,ao as I,u as v,F as T,aP as M,am as y,I as N,aQ as E,H as L,bc as H,t as U,bH as j}from"./index-346f95fe.js";import{h as z}from"./_utils-e1c645e6.js";import D from"./FooterBtns-8c6c3ddb.js";import{d as K}from"./_config-c76f4e31.js";import"./index-6d0323cd.js";const Q={inheritAttrs:!1},W=k({...Q,__name:"CellForm",props:{modelValue:{default:()=>A({})},fields:{default:()=>[]},pureText:{type:Boolean},fetch:{},fetchSuccess:{},fetchFail:{},footer:{type:Boolean,default:!0},submitText:{},resetText:{},extraParams:{},moreBtns:{},colSpanAttrs:{},loading:{type:Boolean},isOmit:{type:Boolean,default:!0},log:{type:Boolean,default:!_},debug:{type:Boolean},autoFixedFoot:{type:Boolean,default:!0},noSubmitProps:{},handleReq:{}},emits:["update:modelValue","submit","change","moreBtns"],setup(S,{expose:V,emit:C}){const x={span:6},n=S,l=C,m=B(),P=F(()=>{const e=q(n.fields);return p.merge({labelWidth:e+"em"},K)}),h=B([]),a=F({get(){return n.modelValue},set(e){l("update:modelValue",e)}});return w(()=>n.fields,e=>{const{modelValue:o}=n,u=z(e,l,o),{data:d,fields:f}=u;h.value=f,p.merge(a.value,d)},{immediate:!0,deep:!0}),V({formRef:m}),(e,o)=>{const u=c("BaseFormItem"),d=c("el-col"),f=c("el-form");return r(),g(f,y({class:"cell-form f-fs-s-c f-1",model:a.value},P.value,{ref_key:"formRef",ref:m}),{default:b(()=>[O("div",{class:I(["box all-hide-scroll",[e.fields.length?"f-fs-s-w":"f-c-c",e.autoFixedFoot&&"auto-fixed-foot"]])},[e.fields.length?(r(!0),v(T,{key:0},M(e.fields,(t,i)=>(r(),g(d,y(t.colAttrs||Object.assign({},x,e.colSpanAttrs),{key:i}),{default:b(()=>[N(u,{field:t,pureText:t.pureText||e.pureText,modelValue:a.value[t.prop],"onUpdate:modelValue":s=>a.value[t.prop]=s,onChange:o[0]||(o[0]=(s,R)=>l("change",s,R))},{custom:b(({field:s})=>[E(e.$slots,s.prop,{field:s,form:a.value},void 0,!0)]),_:2},1032,["field","pureText","modelValue","onUpdate:modelValue"])]),_:2},1040))),128)):(r(),v(T,{key:1},[L("空空如也~")],64))],2),!e.pureText&&e.footer?(r(),g(D,{key:0,loading:e.loading,moreBtns:e.moreBtns,submitText:e.submitText,resetText:e.resetText,formRef:m.value,isOmit:e.isOmit,log:e.log,debug:e.debug,params:H(p.merge)({},a.value,e.extraParams),fetch:e.fetch,fetchSuccess:e.fetchSuccess,fetchFail:e.fetchFail,noSubmitProps:e.noSubmitProps,handleReq:e.handleReq,disabled:!h.value.length,onMoreBtns:o[1]||(o[1]=(t,i,s)=>l("moreBtns",t,i,s)),onSubmit:o[2]||(o[2]=t=>l("submit",t))},null,8,["loading","moreBtns","submitText","resetText","formRef","isOmit","log","debug","params","fetch","fetchSuccess","fetchFail","noSubmitProps","handleReq","disabled"])):U("",!0)]),_:3},16,["model"])}}});const Z=j(W,[["__scopeId","data-v-9d4e988b"]]);export{Z as default};
