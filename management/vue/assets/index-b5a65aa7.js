import{M as E,aM as p,bJ as F,bI as P,aK as q,q as z,aR as I,aE as l,u as d,v as a,b3 as v,bc as _,s as S,af as U,F as M,bN as m,c1 as R,c0 as V,bP as $,bH as N}from"./index-346f95fe.js";import{a as i}from"./user-7f5e5957.js";import H from"./CaptchaBtn-10340d8c.js";import{_ as c}from"./BaseIcon.vue_vue_type_script_lang-b4e8d4df.js";const W={class:"page f-c-c"},A={class:"h1"},D={class:"box f-fs-c"},J={class:"wrap f-c-c-c"},K={class:"h2 f-0"},j=E({__name:"index",setup(G){var b;const f={login:{title:"登录",api:i,submitText:"登录"},regist:{title:"注册",api:i,submitText:"注册"},forget:{title:"忘记密码",api:i}},s=p("login"),x=F(),h=P(),u=p(!1),y={}.VITE_APP_TITLE;p(((b=h.query.redirect)==null?void 0:b.toString())??"/");const{login_account:g}=localStorage;let o=q({account:g||"",password:"",remember:!!g});const k=z(()=>[{prop:"account",label:"账号",required:!0,attrs:{showWordLimit:!1,slots:{prefix:{component:c,attrs:{name:"User",size:"24"}}}}},s.value!=="login"&&{prop:"yzm",label:"验证码",required:!0,class:"captcha-box",attrs:{maxlength:4,showWordLimit:!1,slots:{prefix:{component:c,attrs:{name:"Clock",size:"24"}},append:{component:H}}}},{prop:"password",label:"密码",valid:"password",required:!0,attrs:{slots:{prefix:{component:c,attrs:{name:"Lock",size:"24"}}}}},s.value==="regist"&&{prop:"confirmPsd",label:"确认密码",valid:"password",required:!0,rules:[{validator:w,trigger:"blur"}],attrs:{placeholder:"请再次输入密码",slots:{prefix:{component:c,attrs:{name:"Unlock",size:"24"}}}}},s.value==="login"&&{prop:"remember",label:"记住我",type:"checkbox",class:"rember",attrs:{size:"large"}}]);function w(t,e,r){e!==o.password?r(new Error("确认密码和密码需要保持一致")):r()}function T(t){const e={login:()=>C(t),regist:()=>L(),forget:()=>B()};e[s.value]?e[s.value]():m.warning(`点击了${s.value}按钮`)}function C(t){u.value=!0,i(t).then(e=>{R(e),x.push("/"),V({type:"success",title:"登录成功",duration:2e3,dangerouslyUseHTMLString:!0,message:`欢迎回来，<b>${$()._title}</b>`})}).finally(()=>{u.value=!1})}function L(t){m.warning("注册功能暂未开通，敬请期待！")}function B(t){m.warning("找回密码功能暂未开通，敬请期待！")}return(t,e)=>{const r=I("BaseForm");return l(),d("div",W,[a("h1",A,v(_(y)),1),a("div",D,[a("div",J,[a("h2",K,v(f[s.value].title),1),(l(),S(r,{class:"form f-0",modelValue:_(o),"onUpdate:modelValue":e[0]||(e[0]=n=>U(o)?o.value=n:o=n),fields:k.value,submitText:f[s.value].submitText,loading:u.value,autoFixedFoot:!1,onSubmit:T,key:s.value},null,8,["modelValue","fields","submitText","loading"]))]),s.value==="login"?(l(),d(M,{key:0},[a("div",{onClick:e[1]||(e[1]=n=>s.value="regist"),class:"btns f-c-c blue"},"去注册"),a("div",{onClick:e[2]||(e[2]=n=>s.value="forget"),class:"btns f-c-c"},"忘记密码")],64)):(l(),d("div",{key:1,onClick:e[3]||(e[3]=n=>s.value="login"),class:"btns f-c-c"},"去登录"))])])}}});const Z=N(j,[["__scopeId","data-v-6b1bab7c"]]);export{Z as default};
