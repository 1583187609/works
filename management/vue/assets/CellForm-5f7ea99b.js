import{M as e,aK as t,c5 as a,aM as s,q as o,cq as l,b_ as r,bs as d,aR as m,aE as u,s as i,bx as f,v as n,ao as c,u as p,F as b,aP as h,am as x,I as g,aQ as B,H as v,bc as T,t as y,bH as F}from"./index-050c1617.js";import{h as S}from"./_utils-775776d1.js";import _ from"./FooterBtns-103dee48.js";import{d as R}from"./_config-c0994392.js";import"./index-605a54c6.js";const V=F(e({inheritAttrs:!1,__name:"CellForm",props:{modelValue:{default:()=>t({})},fields:{default:()=>[]},pureText:{type:Boolean},fetch:{},fetchSuccess:{},fetchFail:{},footer:{type:Boolean,default:!0},submitText:{},resetText:{},extraParams:{},moreBtns:{},colSpanAttrs:{},loading:{type:Boolean},isOmit:{type:Boolean,default:!0},log:{type:Boolean,default:!a},debug:{type:Boolean},autoFixedFoot:{type:Boolean,default:!0},noSubmitProps:{},handleReq:{}},emits:["update:modelValue","submit","change","moreBtns"],setup(e,{expose:t,emit:a}){const F={span:6},V=e,P=a,j=s(),q=o((()=>{const e=l(V.fields);return r.merge({labelWidth:e+"em"},R)})),k=s([]),O=o({get:()=>V.modelValue,set(e){P("update:modelValue",e)}});return d((()=>V.fields),(e=>{const{modelValue:t}=V,a=S(e,P,t),{data:s,fields:o}=a;k.value=o,r.merge(O.value,s)}),{immediate:!0,deep:!0}),t({formRef:j}),(e,t)=>{const a=m("BaseFormItem"),s=m("el-col"),o=m("el-form");return u(),i(o,x({class:"cell-form f-fs-s-c f-1",model:O.value},q.value,{ref_key:"formRef",ref:j}),{default:f((()=>[n("div",{class:c(["box all-hide-scroll",[e.fields.length?"f-fs-s-w":"f-c-c",e.autoFixedFoot&&"auto-fixed-foot"]])},[e.fields.length?(u(!0),p(b,{key:0},h(e.fields,((o,l)=>(u(),i(s,x(o.colAttrs||Object.assign({},F,e.colSpanAttrs),{key:l}),{default:f((()=>[g(a,{field:o,pureText:o.pureText||e.pureText,modelValue:O.value[o.prop],"onUpdate:modelValue":e=>O.value[o.prop]=e,onChange:t[0]||(t[0]=(e,t)=>P("change",e,t))},{custom:f((({field:t})=>[B(e.$slots,t.prop,{field:t,form:O.value},void 0,!0)])),_:2},1032,["field","pureText","modelValue","onUpdate:modelValue"])])),_:2},1040)))),128)):(u(),p(b,{key:1},[v("空空如也~")],64))],2),!e.pureText&&e.footer?(u(),i(_,{key:0,loading:e.loading,moreBtns:e.moreBtns,submitText:e.submitText,resetText:e.resetText,formRef:j.value,isOmit:e.isOmit,log:e.log,debug:e.debug,params:T(r.merge)({},O.value,e.extraParams),fetch:e.fetch,fetchSuccess:e.fetchSuccess,fetchFail:e.fetchFail,noSubmitProps:e.noSubmitProps,handleReq:e.handleReq,disabled:!k.value.length,onMoreBtns:t[1]||(t[1]=(e,t,a)=>P("moreBtns",e,t,a)),onSubmit:t[2]||(t[2]=e=>P("submit",e))},null,8,["loading","moreBtns","submitText","resetText","formRef","isOmit","log","debug","params","fetch","fetchSuccess","fetchFail","noSubmitProps","handleReq","disabled"])):y("",!0)])),_:3},16,["model"])}}}),[["__scopeId","data-v-9d4e988b"]]);export{V as default};
