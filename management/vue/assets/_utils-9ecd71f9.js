import{c3 as v,cH as P,ca as y,cp as D,bZ as E}from"./index-0bf49a0e.js";function A(c,t){if(!t)return;const{attrs:n,children:f}=c,{attrs:s,...p}=t;c.attrs=n?E.merge({},s,n):s,f==null||f.forEach(O=>{if(v(O)!=="Object")return!1;A(O,t)}),E.merge(c,p,JSON.parse(JSON.stringify(c)))}function I(c){const t={};return c==null||c.map(n=>{if(v(n)!=="Object")return;const{prop:f}=n;t[f]=void 0}),t}function J(c=[],t,n,f){const s={data:{},fields:[]};return c.forEach((p,O)=>{if(v(p)!=="Object")return null;const{type:w,prop:g,children:r}=p,j=v(g);if(P(p,n),j==="String"){let o=n==null?void 0:n[g];if(w==="checkbox"&&o===void 0)o=!1;else if(w==="addDel")s.data[g]=o!=null&&o.length?o:[I(r)];else{const a=r!=null&&r.length?J(r,t,o).data:o;s.data[g]=a,a!==void 0&&(t==null||t("change",g,a))}}else if(j==="Array"){const[o,a]=g,h=n==null?void 0:n[a],i=n==null?void 0:n[o],b=g.join(y),x=i===void 0&&h===void 0?void 0:[i,h];s.data[b]=x,p.prop=b,x!==void 0&&(t==null||t("change",b,x))}else if(j==="Undefined")if(r)if(r.length){const o={},a=r.map(i=>{const{prop:b}=i;return o[b]=n==null?void 0:n[b],b}).join(y),h=o;p.prop=a,s.data[a]=h,Object.keys(h).length&&(t==null||t("change",a,h))}else console.warn("children不能为空数组");else throw new Error("不能同时没有prop和children属性");else throw new Error(`暂未处理prop为${j}类型的值`);if(A(p,f),r!=null&&r.length){const o=D(r);r==null||r.forEach(a=>{if(v(a)!=="Object")return!1;const h=a;h.labelWidth===void 0&&(h.labelWidth=o+"em")})}s.fields.push(p)}),s}export{I as g,J as h};
