import{a as y}from"./avatar-810e7140.js";import{ay as p}from"./index-79ac556c.js";import{q as U,e as b,a6 as m,t as o,D as u,E as h,v as k}from"./runtime-core.esm-bundler-95bf9971.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";const B=["src"],V=U({__name:"UploadAvatar",props:{modelValue:{default:y},accepts:{default:()=>["image/png","image/jpeg"]},maxSize:{default:1}},emits:["update:modelValue"],setup(d,{emit:i}){const c=d,r=i,l=b({get(){return c.modelValue},set(e){r("update:modelValue",e)}}),_=(e,a)=>{r("update:modelValue",URL.createObjectURL(a.raw))},f=e=>{const{type:a,size:s}=e,{accepts:t,maxSize:n}=c;if(t.includes(a)){if(s/1024/1024>n)return p.error(`图片大小不能超过 ${n}MB!`),!1}else{const v=t.map(g=>g.split("/")[1]).join("，");return p.error(`请上传 ${v} 格式的图片！`),!1}return!0};return(e,a)=>{const s=m("BaseIcon"),t=m("el-upload");return o(),u(t,{class:"upload-avatar f-c-c",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","show-file-list":!1,"on-success":_,"before-upload":f,accept:e.accepts.join(",")},{default:h(()=>[l.value?(o(),k("img",{key:0,src:l.value,class:"img"},null,8,B)):(o(),u(s,{key:1,name:"Plus",size:"32"}))]),_:1},8,["accept"])}}});const w=x(V,[["__scopeId","data-v-2750493b"]]);export{w as U};
