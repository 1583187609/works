var e,t,n;import{M as l,ak as s,c9 as o,q as a,u as i,s as c,t as r,F as p,aP as u,aa as m,aR as d,aE as f,ao as v,bx as S,I as _,am as y,cx as h,cy as b,cz as z}from"./index-3bafcaf7.js";import{g as B}from"./index-51f0779e.js";import{_ as C}from"./SetTable.vue_vue_type_script_setup_true_lang-2fe3872c.js";import x from"./SetPrint-0b3b4a9b.js";import{_ as g}from"./BatchBtns.vue_vue_type_script_setup_true_lang-f1cd91b8.js";const k={class:"extra-btns f-fs-c-w"},j=l({__name:"Index",props:s({columns:{},allColumns:{},btns:{},toolBtns:{},total:{},isEmpty:{type:Boolean},batchBtn:{type:Boolean},size:{},allSelection:{type:Function},clearSelection:{type:Function},invertSelection:{type:Function}},Object.assign({columns:()=>[],allColumns:()=>[],btns:()=>[],toolBtns:()=>["set"]},null==(n=null==(t=null==(e=o)?void 0:e.BaseCrud)?void 0:t._components)?void 0:n.ExtraBtns)),emits:["click","toolBtn","update:cols"],setup(e,{emit:t}){const n={print:{name:"print",title:"打印",attrs:{type:"primary",icon:b,plain:!0,circle:!0}},set:{name:"colSet",title:"设置",attrs:{type:"primary",icon:z,plain:!0,circle:!0}}},l=e,s=t,o=m("openPopup"),j=a((()=>{const e=l.btns.map((e=>B(e)));return h(e),e})),w=a((()=>l.toolBtns.map((e=>n[e]))));function E(e,t,n){const{columns:o,allColumns:a}=l;if(t){let e=-1;o.findIndex(((t,l)=>{const s=a.findIndex((e=>e.prop===t.prop));return s>n?(e=l,!0):s<n?l===o.length-1&&(e=o.length,!0):void 0})),o.splice(e,0,a[n])}else{const t=o.findIndex((t=>t.prop===e));o.splice(t,1)}s("update:cols",o.slice())}function I(e,t,n){}function F(e,t,n){}function P(){const{columns:e,allColumns:t}=l,n=t.filter((e=>{var t;return!(null==(t=e.prop)?void 0:t.startsWith("$"))})).map((t=>{const{prop:n,label:l,sortable:s=!1}=t;return{colName:l,colProp:n,isShow:!!e.find((e=>e.prop===n)),isExport:!0,isOrder:s}}));o("列设置",{component:C,attrs:{rows:n,size:l.size,handleShowChange:E,handleExportChange:I,handleOrderChange:F,handleResetColSet:O}},"drawer")}function O(){s("update:cols",l.allColumns.slice()),setTimeout((()=>{P()}))}return(e,t)=>{const n=d("BaseBtn"),l=d("el-button"),a=d("el-tooltip");return f(),i("div",k,[e.batchBtn?(f(),c(g,{key:0,class:"mr-12",allSelection:e.allSelection,clearSelection:e.clearSelection,invertSelection:e.invertSelection,size:e.size,disabled:!e.total},null,8,["allSelection","clearSelection","invertSelection","size","disabled"])):r("",!0),(f(!0),i(p,null,u(j.value,((t,l)=>(f(),c(n,{onClick:e=>{s("click",t)},class:v("small"===e.size?"mb-q":"mb-h"),name:t,size:e.size,key:l},null,8,["onClick","class","name","size"])))),128)),(f(!0),i(p,null,u(w.value,((t,n)=>(f(),c(a,{content:t.title,"show-after":500,key:n},{default:S((()=>[_(l,y({style:{marginLeft:0===n?"auto":void 0},size:e.size,onClick:e=>{var n;"colSet"===(n=t.name)?P():"print"===n&&o("打印设置",x,"dialog")}},t.attrs),null,16,["style","size","onClick"])])),_:2},1032,["content"])))),128))])}}});export{j as _};
