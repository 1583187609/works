import{ay as Be,a9 as Ue}from"./index-79ac556c.js";import{l as E,f as he,t as pe,m as we}from"./common-f4827de9.js";import{j as Ie,f as de,d as Fe,r as ie}from"./system-a8d5b9ab.js";import{a as me,b as ve,d as fe}from"./_config-82a4d737.js";import{A as Ae}from"./AddDelBtn-c6b21ce5.js";import{g as Pe,h as De}from"./_utils-eb832563.js";import{q as ce,e as X,O as Ne,r as Y,w as M,a6 as i,t,v as f,a0 as B,F as U,D as p,V as m,L as C,T as $e,E as b,af as Ee,a3 as H,u as Q,z as ze,I as j,J as W,K as z,G as Oe,a1 as O,y as Re,x as Se}from"./runtime-core.esm-bundler-95bf9971.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-4a03ead4.js";const je=ce({__name:"GroupList",props:{modelValue:{},parentProp:{default:""},fields:{default:()=>[]},pureText:{type:Boolean}},emits:["update:modelValue","change"],setup(L,{emit:q}){const k=L,r=q,s=Pe(k.fields),h=X({get(){return k.modelValue},set(v){r("update:modelValue",v)}}),F=Ne({}),l=Y([]);M(()=>k.fields,v=>{const{modelValue:P}=k,D=De(v,r,P),{data:R,fields:u}=D;E.merge(F,R),l.value=u},{immediate:!0}),M(()=>k.modelValue,v=>{E.merge(F,v)},{immediate:!1,deep:!0}),M(F,v=>{E.merge(k.modelValue,v)},{immediate:!1,deep:!0});function G(){const v=Object.values(h.value.slice(-1)[0]);return v.length?v.some(D=>Ie.includes(D)):!0}function J(v,P){if(v==="add"){if(G()){Be.error("请将最后一项填写完毕后，再新增！");return}h.value.push(JSON.parse(JSON.stringify(s)))}else if(v==="del")h.value.splice(P,1);else throw new Error(`暂不支持${v}类型`)}return(v,P)=>{const D=i("BaseFormItem");return t(!0),f(U,null,B(h.value,(R,u)=>(t(),f("div",{class:"group-item f-fs-fs-w",key:u},[(t(!0),f(U,null,B(l.value,(e,o)=>(t(),p(D,m({prefixProp:`${v.parentProp}[${u}].`,field:e,pureText:e.pureText||v.pureText,modelValue:h.value[u][e.prop],"onUpdate:modelValue":c=>h.value[u][e.prop]=c},e,{key:o}),null,16,["prefixProp","field","pureText","modelValue","onUpdate:modelValue"]))),128)),C(Ae,{onClick:e=>J(e,u),type:u<h.value.length-1?"del":"add"},null,8,["onClick","type"])]))),128)}}});const Le=ye(je,[["__scopeId","data-v-7ac0ff25"]]),qe={key:0,class:"mr-h"},Ge={class:"err"},Je={key:15,class:"err"},Ke={key:16,class:"ml-h"},Me=["innerHTML"],He={key:1,class:"f-fs-fs-w"},Qe={name:"BaseFormItem",inheritAttrs:!1},We=ce({...Qe,props:{prefixProp:{default:""},field:{},pureText:{type:Boolean},modelValue:{},className:{},inputDebounce:{type:Boolean},size:{}},emits:["update:modelValue","change"],setup(L,{emit:q}){const k=L,r=q;$e();const s=X({get(){return k.modelValue},set(u){r("update:modelValue",u)}}),h=Y(),F=Y([]),l=X(()=>{var $,S;const{prefixProp:u,field:e,size:o}=k,{type:c,label:y,valid:V="",children:_}=e,x=V?me[V]:{},{type:A}=x,T=c||A||fe,g=ve[T],n=E.merge({type:T},g,x,e),w=((S=($=n==null?void 0:n.attrs)==null?void 0:$.getAttrs)==null?void 0:S.call($,n))||{};E.merge(n,{attrs:w},e),h.value=Fe(n.popover),n.prop=`${u}${e.prop}`,_!=null&&_.length&&(F.value=_),n.rules=J(n,e.rules),n.attrs.placeholder=G(n);const{slots:N}=n.attrs;return pe(N)==="String"&&(n.attrs.slots={default:N}),o==="small"&&T==="date-picker"&&(n.labelWidth=y.length+.5+"em"),delete n.popover,delete n.children,n});function G(u){var y;const{label:e="",example:o}=u;let c=((y=u==null?void 0:u.attrs)==null?void 0:y.placeholder)??"";return c=c.replace("${label}",e),o&&(c+=`，例：${o}`),c}function J(u,e=[]){const{label:o="",valid:c,required:y,children:V}=u,x=[...(c?me[c]:{}).rules||[],...y?[{required:y,message:o+"必填",trigger:"blur"}]:[],...e];return v(x)}function v(u=[]){let e=[];return u.forEach((o,c)=>{const y=["required","min","max","pattern","validator"],{type:V}=o,_=e.findIndex((x,A)=>{let T=!1;return V?T=x.type===V:T=!!y.find((g,n)=>o[g]!==void 0&&x[g]!==void 0),T});_===-1?e.push(o):e[_]=o}),e}function P(u,e){var x,A,T;const{type:o=fe,label:c,attrs:y={},options:V=[],after:_=""}=u;if(["select","radio-group"].includes(o))e=(x=V==null?void 0:V.find(g=>g.value===e))==null?void 0:x.label;else if(o.includes("Time")||o.includes("date")){const{format:g}=E.merge({},(A=ve[o])==null?void 0:A.attrs,y),n=pe(e)==="Array",w=` ${ie} `;k.pureText?e=n?e.join(w):e:e=n?e.map(N=>N.format(g)).join(w):e==null?void 0:e.format(g)}else if(o==="checkbox-group")e=(T=V==null?void 0:V.filter(g=>e.includes(g.value)))==null?void 0:T.map(g=>g.label).join("，");else if(o==="input-number")e=e?e+_:"-";else if(o==="switch"){const{activeText:g="是",inactiveText:n="否",activeValue:w}=y;e=w===e?g:n}else o==="checkbox"?e=e?"是":"否":o==="cascader"?e=we(y==null?void 0:y.options,e)||"-":o==="BaseNumberRange"?e=e.join(ie):o==="custom"&&(e="-");return{label:c,value:e}}function D(u,e){if(k.inputDebounce){const c=(u.querySelector("input")||u.querySelector("textarea")).value;r("change",e,c)}}function R(u,e){k.inputDebounce||r("change",e,u)}return(u,e)=>{const o=i("BaseRender"),c=i("BaseIcon"),y=i("el-popover"),V=i("el-input"),_=i("el-option"),x=i("el-select"),A=i("el-date-picker"),T=i("el-radio-button"),g=i("el-radio"),n=i("el-radio-group"),w=i("el-checkbox"),N=i("el-checkbox-group"),$=i("el-input-number"),S=i("el-switch"),ge=i("el-cascader"),Ve=i("BaseNumberRange"),be=i("BaseUpload"),_e=i("el-autocomplete"),ke=i("el-slider"),xe=i("BaseFormItem"),Te=i("el-form-item"),Ce=Ee("debounce");return t(),p(Te,m({class:"base-form-item"},l.value,{class:[u.className,l.value.labelHide&&"label-hide"]}),{label:b(()=>[C(o,{data:l.value.label},null,8,["data"]),h.value?(t(),p(y,H(m({key:0},h.value)),{reference:b(()=>[C(c,{color:Q(he).colorInfo,class:ze(["icon-popover",u.size]),name:"QuestionFilled"},null,8,["color","class"])]),_:1},16)):j("",!0)]),default:b(()=>{var Z,ee,le,ae,te,oe,ue,se,ne,re;return[l.value.before?(t(),f("div",qe,[C(o,{data:l.value.before},null,8,["data"])])):j("",!0),F.value.length?(t(),f(U,{key:2},[l.value.type==="addDel"?(t(),p(Le,{key:0,parentProp:l.value.prop,fields:F.value,pureText:u.pureText,modelValue:s.value,"onUpdate:modelValue":e[31]||(e[31]=a=>s.value=a)},null,8,["parentProp","fields","pureText","modelValue"])):(t(),f("div",He,[(t(!0),f(U,null,B(F.value,(a,d)=>(t(),p(xe,m({prefixProp:l.value.prop+".",field:a,pureText:a.pureText||u.pureText,modelValue:s.value[a.prop],"onUpdate:modelValue":I=>s.value[a.prop]=I},a,{key:d}),null,16,["prefixProp","field","pureText","modelValue","onUpdate:modelValue"]))),128))]))],64)):(t(),f(U,{key:1},[l.value.pureText||u.pureText?(t(),f(U,{key:0},[W(z(P(l.value,s.value).value??"-"),1)],64)):(t(),f(U,{key:1},[l.value.type==="input"?Oe((t(),p(V,m({key:0,class:{"f-1":l.value.before||l.value.after},onClear:e[0]||(e[0]=a=>r("change",l.value.prop,"")),onKeyup:e[1]||(e[1]=Ue(a=>R(a.target.value,l.value.prop),["enter"])),modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value=a),modelModifiers:{trim:!0}},l.value.attrs),O({_:2},[B((ee=(Z=l.value)==null?void 0:Z.attrs)==null?void 0:ee.slots,(a,d)=>({name:d,fn:b(()=>[C(o,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])),[[Ce,a=>D(a,l.value.prop),"input"]]):l.value.type==="select"?(t(),p(x,m({key:1,class:{"f-1":l.value.before||l.value.after},onChange:e[3]||(e[3]=a=>r("change",l.value.prop,a)),modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value=a)},l.value.attrs),O({default:b(()=>[(t(!0),f(U,null,B(l.value.options,(a,d)=>(t(),f(U,{key:d},[a!=null&&a.customOption?(t(),p(_,H(m({key:0},Q(de)(a,["customOption"]))),{default:b(()=>[C(o,{data:a.customOption},null,8,["data"])]),_:2},1040)):(t(),p(_,H(m({key:1},a)),null,16))],64))),128))]),_:2},[B((ae=(le=l.value)==null?void 0:le.attrs)==null?void 0:ae.slots,(a,d)=>({name:d,fn:b(()=>[C(o,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])):l.value.type==="date-picker"?(t(),p(A,m({key:2,class:{"f-1":l.value.before||l.value.after},onChange:e[5]||(e[5]=a=>r("change",l.value.prop,a)),onClear:e[6]||(e[6]=a=>r("change",l.value.prop,"")),modelValue:s.value,"onUpdate:modelValue":e[7]||(e[7]=a=>s.value=a)},l.value.attrs),O({_:2},[B((oe=(te=l.value)==null?void 0:te.attrs)==null?void 0:oe.slots,(a,d)=>({name:d,fn:b(()=>[C(o,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])):l.value.type==="radio-group"?(t(),p(n,m({key:3,onChange:e[8]||(e[8]=a=>r("change",l.value.prop,a)),modelValue:s.value,"onUpdate:modelValue":e[9]||(e[9]=a=>s.value=a)},l.value.attrs),{default:b(()=>{var a,d;return[((d=(a=l.value)==null?void 0:a.attrs)==null?void 0:d.type)==="button"?(t(!0),f(U,{key:0},B(l.value.options,(I,K)=>(t(),p(T,{disabled:I.disabled,label:I.value,key:K},{default:b(()=>[W(z(I.label),1)]),_:2},1032,["disabled","label"]))),128)):(t(!0),f(U,{key:1},B(l.value.options,(I,K)=>(t(),p(g,{disabled:I.disabled,label:I.value,key:K},{default:b(()=>[W(z(I.label),1)]),_:2},1032,["disabled","label"]))),128))]}),_:1},16,["modelValue"])):l.value.type==="checkbox-group"?(t(),p(N,m({key:4,onChange:e[10]||(e[10]=a=>r("change",l.value.prop,a)),modelValue:s.value,"onUpdate:modelValue":e[11]||(e[11]=a=>s.value=a)},l.value.attrs),{default:b(()=>[(t(!0),f(U,null,B(l.value.options,(a,d)=>(t(),p(w,m({disabled:a.disabled,label:a.value},Q(de)(a,["label"]),{name:l.value.prop,key:d}),{default:b(()=>[C(o,{data:a.label},null,8,["data"])]),_:2},1040,["disabled","label","name"]))),128))]),_:1},16,["modelValue"])):l.value.type==="input-number"?(t(),p($,m({key:5,onChange:e[12]||(e[12]=a=>r("change",l.value.prop,a)),modelValue:s.value,"onUpdate:modelValue":e[13]||(e[13]=a=>s.value=a)},l.value.attrs),null,16,["modelValue"])):l.value.type==="switch"?(t(),p(S,m({key:6,onChange:e[14]||(e[14]=a=>r("change",l.value.prop,a)),modelValue:s.value,"onUpdate:modelValue":e[15]||(e[15]=a=>s.value=a)},l.value.attrs),null,16,["modelValue"])):l.value.type==="cascader"?(t(),p(ge,m({key:7,class:{"f-1":l.value.before||l.value.after},onChange:e[16]||(e[16]=a=>r("change",l.value.prop,a)),onClear:e[17]||(e[17]=a=>r("change",l.value.prop,"")),modelValue:s.value,"onUpdate:modelValue":e[18]||(e[18]=a=>s.value=a),options:l.value.options},l.value.attrs),O({_:2},[B((se=(ue=l.value)==null?void 0:ue.attrs)==null?void 0:se.slots,(a,d)=>({name:d,fn:b(()=>[C(o,{data:a},null,8,["data"])])}))]),1040,["class","modelValue","options"])):l.value.type==="custom"?Re(u.$slots,"custom",{key:8,field:l.value},()=>[Se("div",Ge," 【自定义】"+z(`${l.value.label}（${l.value.prop})`),1)],!0):l.value.type==="BaseNumberRange"?(t(),p(Ve,m({key:9,class:{"f-1":l.value.before||l.value.after},onChange:e[19]||(e[19]=(a,d)=>r("change",a,d)),onClear:e[20]||(e[20]=(a,d)=>r("change",a,d)),size:u.size,modelValue:s.value,"onUpdate:modelValue":e[21]||(e[21]=a=>s.value=a)},l.value),null,16,["class","size","modelValue"])):l.value.type==="BaseUpload"?(t(),p(be,m({key:10,onChange:e[22]||(e[22]=a=>r("change",l.value.prop,a))},l.value.attrs,{modelValue:s.value,"onUpdate:modelValue":e[23]||(e[23]=a=>s.value=a)}),null,16,["modelValue"])):l.value.type==="autocomplete"?(t(),p(_e,m({key:11,class:{"f-1":l.value.before||l.value.after},onChange:e[24]||(e[24]=a=>r("change",l.value.prop,a)),onClear:e[25]||(e[25]=a=>r("change",l.value.prop,"")),modelValue:s.value,"onUpdate:modelValue":e[26]||(e[26]=a=>s.value=a)},l.value.attrs),O({_:2},[B((re=(ne=l.value)==null?void 0:ne.attrs)==null?void 0:re.slots,(a,d)=>({name:d,fn:b(()=>[C(o,{data:a},null,8,["data"])])}))]),1040,["class","modelValue"])):l.value.type==="slider"?(t(),p(ke,m({key:12,class:{"f-1":l.value.before||l.value.after},onChange:e[27]||(e[27]=a=>r("change",l.value.prop,a)),modelValue:s.value,"onUpdate:modelValue":e[28]||(e[28]=a=>s.value=a)},l.value.attrs),null,16,["class","modelValue"])):l.value.type==="checkbox"?(t(),p(w,m({key:13,onChange:e[29]||(e[29]=a=>r("change",l.value.prop,a)),modelValue:s.value,"onUpdate:modelValue":e[30]||(e[30]=a=>s.value=a)},l.value.attrs),null,16,["modelValue"])):l.value.type==="empty"?(t(),f("div",m({key:14,class:"empty"},l.value.attrs),null,16)):(t(),f("div",Je,"【不存在】"+z(l.value.type),1)),l.value.after?(t(),f("div",Ke,[C(o,{data:l.value.after},null,8,["data"])])):j("",!0)],64)),l.value.tips?(t(),f("div",{key:2,class:"show-tips",innerHTML:"注："+l.value.tips},null,8,Me)):j("",!0)],64))]}),_:3},16,["class"])}}});const sl=ye(We,[["__scopeId","data-v-52f32150"]]);export{sl as default};
