import{c2 as j,cI as I,cj as y,cc as P,cd as E}from"./index-95e659d0.js";function A(a,t){if(!t)return;const{attrs:n,children:f}=a,{attrs:s,...p}=t;a.attrs=n?E.merge({},s,n):s,f==null||f.forEach(O=>{if(j(O)!=="Object")return!1;A(O,t)}),E.merge(a,p,JSON.parse(JSON.stringify(a)))}function D(a){const t={};return a==null||a.map(n=>{if(j(n)!=="Object")return;const{prop:f}=n;t[f]=void 0}),t}function J(a=[],t,n,f){const s={data:{},fields:[]};return a.forEach((p,O)=>{if(j(p)!=="Object")return null;const{type:w,prop:g,children:r}=p,v=j(g);if(I(p,n),v==="String"){let o=n==null?void 0:n[g];if(w==="checkbox"&&o===void 0)o=!1;else if(w==="addDel")s.data[g]=o!=null&&o.length?o:[D(r)];else{const c=r!=null&&r.length?J(r,t,o).data:o;s.data[g]=c,c!==void 0&&(t==null||t("change",g,c))}}else if(v==="Array"){const[o,c]=g,h=n==null?void 0:n[c],i=n==null?void 0:n[o],b=g.join(y),x=i===void 0&&h===void 0?void 0:[i,h];s.data[b]=x,p.prop=b,x!==void 0&&(t==null||t("change",b,x))}else if(v==="Undefined")if(r)if(r.length){const o={},c=r.map(i=>{const{prop:b}=i;return o[b]=n==null?void 0:n[b],b}).join(y),h=o;p.prop=c,s.data[c]=h,Object.keys(h).length&&(t==null||t("change",c,h))}else console.warn("children不能为空数组");else throw new Error("不能同时没有prop和children属性");else throw new Error(`暂未处理prop为${v}类型的值`);if(A(p,f),r!=null&&r.length){const o=P(r);r==null||r.forEach(c=>{if(j(c)!=="Object")return!1;const h=c;h.labelWidth===void 0&&(h.labelWidth=o+"em")})}s.fields.push(p)}),s}export{D as g,J as h};
