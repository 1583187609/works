import e from"./IconPicker-6805cf45.js";import{M as t,bO as a,aK as o,q as r,aR as p,aE as s,s as l,bx as i,I as u,bc as n,af as d}from"./index-f41eb58a.js";import{G as c,P as m,a as b}from"./auth-aa819899.js";import h from"./MenuTree-a24c3397.js";const y=t({__name:"AddEdit",props:{id:{},refreshList:{}},setup(t){const{getOpts:y}=a();y("MenuType");const f=y("YesNoStatus"),_=y("Enable"),q=t;let g=o(q.id?{}:{type:1,order:1,is_cache:2,is_out_link:2,status:1});const x=r((()=>{const e=g.type||1;return[{prop:"type",label:"菜单类型",required:!0,type:"radio-group",options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"按钮",value:2}],attrs:{type:"button"}},{prop:"name",label:"菜单名称",required:!0},{prop:"parent_id",label:"上级菜单",type:"custom"},{prop:"order",label:"排序",required:!0,type:"input-number",attrs:{style:"width: 205px",placeholder:"数值越小，越靠前"}},...0===e?[[{prop:"icon",label:"图标",type:"custom"}]]:[],...1===e?[{prop:"component_path",label:"组件路径",required:!0},{prop:"menu_path",label:"路由地址",required:!0,example:"/auth"},{prop:"is_cache",label:"是否缓存",type:"radio-group",options:f},{prop:"is_out_link",label:"是否外链",type:"radio-group",options:f}]:[],...2===e?[{prop:"perms",label:"权限标识",attrs:{placeholder:"请输入权限标识，用,或，隔开（示例：0,1，2）"}}]:[],{prop:"status",label:"状态",required:!0,type:"radio-group",options:_}]}));return function(e){if(!e)return;c({id:e}).then((e=>{const{type:t}=e;2===t&&(e.type=1),3===t&&(e.type=2),Object.assign(g,e)}))}(q.id),(t,a)=>{const o=p("BaseForm");return s(),l(o,{modelValue:n(g),"onUpdate:modelValue":a[1]||(a[1]=e=>d(g)?g.value=e:g=e),style:{width:"600px"},fields:x.value,fetch:t.id?n(m):n(b),fetchSuccess:t.refreshList},{parent_id:i((()=>[u(h)])),icon:i((({})=>[u(e,{modelValue:n(g).icon,"onUpdate:modelValue":a[0]||(a[0]=e=>n(g).icon=e)},null,8,["modelValue"])])),_:1},8,["modelValue","fields","fetch","fetchSuccess"])}}});export{y as _};
