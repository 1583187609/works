import{M as C,aK as w,c3 as q,aM as c,q as h,bs as N,aR as v,aE as m,s as b,bx as y,v as E,u as F,aP as M,aQ as O,F as T,H as _,ao as A,t as I,am as K,bA as L,cp as H,c8 as g,bH as U}from"./index-346f95fe.js";import{h as $}from"./_utils-e1c645e6.js";import z from"./FooterBtns-8c6c3ddb.js";import{d as D}from"./_config-c76f4e31.js";import"./index-6d0323cd.js";const Q=C({__name:"BaseForm",props:{modelValue:{default:()=>w({})},fields:{default:()=>[]},pureText:{type:Boolean},fetch:{},fetchSuccess:{},fetchFail:{},span:{default:24},footer:{type:Boolean,default:!0},submitText:{},resetText:{},extraParams:{},moreBtns:{},loading:{type:Boolean},isOmit:{type:Boolean,default:!0},log:{type:Boolean,default:!q},debug:{type:Boolean},isCache:{type:Boolean},autoFixedFoot:{type:Boolean,default:!0},noSubmitProps:{},handleReq:{}},emits:["update:modelValue","submit","change","moreBtns"],setup(V,{expose:x,emit:k}){const s=V,r=k,u=c(null),d=c(),R=h(()=>{const e=H(s.fields);return g.merge({labelWidth:e+"em"},D)}),n=c([]),l=h({get(){return s.modelValue},set(e){r("update:modelValue",e)}}),B=h(()=>g.merge({},l.value,s.extraParams));N(()=>s.fields,e=>{const{modelValue:o}=s,f=$(e,r,o),{data:i,fields:t}=f;n.value=t,g.merge(l.value,i)},{immediate:!0,deep:!0});function S(){s.fetch?u.value.submit():r("submit",B.value)}return x({formRef:d,formValidate(){return u.value.formValidate()}}),(e,o)=>{const f=v("BaseFormItem"),i=v("el-form");return m(),b(i,K({class:"base-form f-fs-s-c f-1",model:l.value},R.value,{onKeyup:L(S,["enter"]),ref_key:"formRef",ref:d}),{default:y(()=>[E("div",{class:A(["all-hide-scroll",[n.value.length?"f-fs-fs-w":"f-c-c",e.autoFixedFoot&&"auto-fixed-foot"]])},[n.value.length?(m(!0),F(T,{key:0},M(n.value,(t,p)=>(m(),b(f,{className:`f-span-${t.span||e.span}`,field:t,pureText:t.pureText||e.pureText,modelValue:l.value[t.prop],"onUpdate:modelValue":a=>l.value[t.prop]=a,onChange:o[0]||(o[0]=(a,P)=>r("change",a,P)),key:t.key===void 0?p:t.key},{custom:y(({field:a})=>[O(e.$slots,a.prop,{field:a,form:l.value},void 0,!0)]),_:2},1032,["className","field","pureText","modelValue","onUpdate:modelValue"]))),128)):(m(),F(T,{key:1},[_("空空如也~")],64))],2),!e.pureText&&e.footer?(m(),b(z,{key:0,loading:e.loading,moreBtns:e.moreBtns,submitText:e.submitText,resetText:e.resetText,formRef:d.value,isOmit:e.isOmit,log:e.log,debug:e.debug,params:B.value,fetch:e.fetch,fetchSuccess:e.fetchSuccess,fetchFail:e.fetchFail,noSubmitProps:e.noSubmitProps,handleReq:e.handleReq,disabled:!n.value.length,onMoreBtns:o[1]||(o[1]=(t,p,a)=>r("moreBtns",t,p,a)),onSubmit:o[2]||(o[2]=t=>r("submit",t)),ref_key:"footerBtnsRef",ref:u},null,8,["loading","moreBtns","submitText","resetText","formRef","isOmit","log","debug","params","fetch","fetchSuccess","fetchFail","noSubmitProps","handleReq","disabled"])):I("",!0)]),_:3},16,["model"])}}});const Y=U(Q,[["__scopeId","data-v-4ddd8b16"]]);export{Y as default};
