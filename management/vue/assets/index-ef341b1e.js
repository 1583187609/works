import"./index-1a9ed3b5.js";import{P as n}from"./user-760da63c.js";import E from"./CaptchaBtn-eb59557f.js";import{_ as l}from"./BaseIcon.vue_vue_type_script_lang-ddb6fec9.js";import{a as F,g as P}from"./platform-fba39571.js";import"./common-f4827de9.js";import{b as q,u as z}from"./vue-router-f1520cd3.js";import{ay as p}from"./index-79ac556c.js";import{E as S}from"./index-eafd3d73.js";import{q as U,r as m,O as I,e as V,a6 as $,t as c,v as d,x as o,K as _,u as b,D as R,k as M,F as D}from"./runtime-core.esm-bundler-95bf9971.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-a0dfeff6.js";import"./index-4a03ead4.js";import"./storage-f5c2149e.js";import"./system-a8d5b9ab.js";const W={class:"page f-c-c"},A={class:"h1"},H={class:"box f-fs-c"},K={class:"wrap f-c-c-c"},O={class:"h2 f-0"},j=U({__name:"index",setup(G){var v;const f={login:{title:"登录",api:n,submitText:"登录"},regist:{title:"注册",api:n,submitText:"注册"},forget:{title:"忘记密码",api:n}},t=m("login"),x=q(),h=z(),u=m(!1),y={}.VITE_APP_TITLE;m(((v=h.query.redirect)==null?void 0:v.toString())??"/");const{login_account:g}=localStorage;let a=I({account:g||"",password:"",remember:!!g});const k=V(()=>[{prop:"account",label:"账号",required:!0,attrs:{showWordLimit:!1,slots:{prefix:{component:l,attrs:{name:"User",size:"24"}}}}},t.value!=="login"&&{prop:"yzm",label:"验证码",required:!0,class:"captcha-box",attrs:{maxlength:4,showWordLimit:!1,slots:{prefix:{component:l,attrs:{name:"Clock",size:"24"}},append:{component:E}}}},{prop:"password",label:"密码",valid:"password",required:!0,attrs:{slots:{prefix:{component:l,attrs:{name:"Lock",size:"24"}}}}},t.value==="regist"&&{prop:"confirmPsd",label:"确认密码",valid:"password",required:!0,rules:[{validator:w,trigger:"blur"}],attrs:{placeholder:"请再次输入密码",slots:{prefix:{component:l,attrs:{name:"Unlock",size:"24"}}}}},t.value==="login"&&{prop:"remember",label:"记住我",type:"checkbox",class:"rember",attrs:{size:"large"}}]);function w(s,e,i){e!==a.password?i(new Error("确认密码和密码需要保持一致")):i()}function T(s){const e={login:()=>C(s),regist:()=>L(),forget:()=>B()};e[t.value]?e[t.value]():p.warning(`点击了${t.value}按钮`)}function C(s){u.value=!0,n(s).then(e=>{F(e),x.push("/"),S({type:"success",title:"登录成功",duration:2e3,dangerouslyUseHTMLString:!0,message:`欢迎回来，<b>${P()._title}</b>`})}).finally(()=>{u.value=!1})}function L(s){p.warning("注册功能暂未开通，敬请期待！")}function B(s){p.warning("找回密码功能暂未开通，敬请期待！")}return(s,e)=>{const i=$("BaseForm");return c(),d("div",W,[o("h1",A,_(b(y)),1),o("div",H,[o("div",K,[o("h2",O,_(f[t.value].title),1),(c(),R(i,{class:"form f-0",modelValue:b(a),"onUpdate:modelValue":e[0]||(e[0]=r=>M(a)?a.value=r:a=r),fields:k.value,submitText:f[t.value].submitText,loading:u.value,autoFixedFoot:!1,onSubmit:T,key:t.value},null,8,["modelValue","fields","submitText","loading"]))]),t.value==="login"?(c(),d(D,{key:0},[o("div",{onClick:e[1]||(e[1]=r=>t.value="regist"),class:"btns f-c-c blue"},"去注册"),o("div",{onClick:e[2]||(e[2]=r=>t.value="forget"),class:"btns f-c-c"},"忘记密码")],64)):(c(),d("div",{key:1,onClick:e[3]||(e[3]=r=>t.value="login"),class:"btns f-c-c"},"去登录"))])])}}});const ue=N(j,[["__scopeId","data-v-6b1bab7c"]]);export{ue as default};
