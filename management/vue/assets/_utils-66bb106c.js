import{c3 as e,cD as t,cE as n,cc as o,bZ as r,ci as s,bN as l,bW as a,cm as i}from"./index-f41eb58a.js";import{g as c}from"./index-a1fddb18.js";const u=["delete","export","pass","reject","repeal","enable","forbid","download"],p=[void 0,"index","id","create","update","remark"];function d({btnObj:t,cols:n,seledRows:o,seledKeys:i,total:c,exportLimit:d,emits:f,next:b}){const{name:m="",text:g,attrs:v,customRules:x}=t,y=(null==v?void 0:v.type)||"primary",h=`color${r.upperFirst(y)}`,$=s[h];if(u.includes(m)&&!x){const t=o.length===c,r=o.length>d;if(["export"].includes(m)&&r)l.warning({message:`单次${g}不能超过 <b>${d}</b> 条，请缩小查询范围！`,dangerouslyUseHTMLString:!0});else{const r=`确定 <b style="color:${$};">${g}${t?"全部</b> ":"</b>"} 共 <b style="color:${$};">${o.length}</b> 条记录？`;a.confirm(r,"温馨提示",{type:"delete"===m?"error":"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:`el-button--${y}`,cancelButtonClass:`el-button--${y} is-plain`,draggable:!0}).then((()=>{const t=[];if("export"===m){const r=(null==n?void 0:n.filter((t=>{var n;return"Object"===e(t)&&!(null==(n=null==t?void 0:t.prop)?void 0:n.startsWith("$"))})))||[];t.push(r.map((e=>e.label))),o.forEach((e=>{const n=[];r.forEach((t=>{const{prop:o,type:r,formatter:s}=t;let l="";p.includes(r)&&(l=s?s(e):e[o]??""),n.push(l)})),t.push(n)}))}f("extraBtn",m,i,b,o,t)})).catch((()=>{}))}}else f("extraBtn",m,[],b,[],[])}function f(e,t){var n,o;const{groupBtns:r,cols:s=[]}=t;if("operate"===e)return r&&"operate"!==(null==(o=null==(n=s.slice(-1))?void 0:n[0])?void 0:o.type);return t[e]&&!s.find((t=>t.type===e))}function b(r,s){const{attrs:l,type:a=i,options:c=[]}=r;if("cascader"===a)return"Array"===e(s)?t(c,s):n(c,s);if("select"===a){if(null==l?void 0:l.multiple){return c.filter((e=>s.includes(e.value))).map((e=>e.label)).join("、")}return n(c,s)}return"BaseNumberRange"===a||"date-picker"===a?null==s?void 0:s.join(o):s}function m(t,n,o){var r;const s="Function"===e(o)?o(t,n):o;return(null==(r=null==s?void 0:s.map((e=>c(e,t))))?void 0:r.filter((e=>!!e.name)))??[]}export{m as a,u as b,b as g,d as h,f as n};
