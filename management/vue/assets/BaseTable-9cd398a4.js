import{t as L,j as le,k as H,l as J,f as te,s as re}from"./common-f4827de9.js";import{r as X,b as F,c as ie,d as ce,f as Y,j as pe,h as ue}from"./system-a8d5b9ab.js";import{f as de}from"./index-4a03ead4.js";import{b as se}from"./vue-router-f1520cd3.js";import{g as me}from"./index-d2b43e08.js";import{b as fe}from"./platform-fba39571.js";import{d as he}from"./_config-82a4d737.js";import{ay as oe}from"./index-79ac556c.js";import{E as ye}from"./index-1d56dfd6.js";import{O as q,q as R,be as ge,e as Z,v as b,F as A,a0 as K,D as g,E as C,u as V,I as E,J as B,K as k,z as ve,Q as _e,a6 as _,t as a,V as S,L as T,x as p,a3 as j,y as ae,r as x,f as be,a9 as Be}from"./runtime-core.esm-bundler-95bf9971.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{s as ee}from"./storage-f5c2149e.js";/* empty css                                                                      */import"./index-1a9ed3b5.js";import{u as ke}from"./all-tags-eaeb4056.js";const Ce=()=>{const d=q(ee.getItem("regions")||[]),o=q(m());function m(){var l;return((l=ee.getItem("reportCascaderOpts"))==null?void 0:l.map(y=>{const{content:e,id:t,children:u}=y;return{label:e,value:t,children:u.map(n=>{const{content:s,id:c}=n;return{label:s,value:c}})}}))||[]}function v(l,y,e="-"){if(l==="Region"){if(!y)return e;let t="";return d.find((u,n)=>{const{label:s,children:c=[]}=u,i=c.find(h=>h.value===y);return i&&(t=`${s}${e}${i.label}`),!!i}),t}else if(l==="ReportCascader"){const t=o.find(u=>u.value===y);return(t==null?void 0:t.label)||""}else throw new Error(`未找到name为${l}的字典映射`)}function f(l){if(l==="Region")return d;if(l==="ReportCascader")return o;throw new Error(`未找到name为${l}的字典映射`)}return{getDictOpts:f,getDictText:v}},Se={maxNum:3},bt={reqMap:()=>({curr_page:"curr_page",page_size:"page_size"}),resMap:()=>({curr_page:"curr_page",page_size:"page_size",total_num:"total_num",records:"records"})},Te={create:{prop:["adminName","createdAt"],label:"创建时间",minWidth:170},update:{prop:["adminName","updatedAt"],label:"修改时间",minWidth:170},switch:{prop:"status",label:"启用状态",minWidth:90,attrs:{activeValue:0,inactiveValue:1,activeText:"启用",inactiveText:"禁用",inlinePrompt:!0}},BaseTag:{prop:"status",label:"状态",minWidth:100,attrs:{name:"Enable"}},BaseImg:{prop:"imgUrl",label:"图片",minWidth:146,attrs:{size:"120"}},UserInfo:{prop:"userData",label:"用户信息",fixed:"left",getAttrs(d){var o;return{width:(o=d==null?void 0:d.attrs)!=null&&o.simple?232:450}}}},Ae=3,$e=["delete","export","pass","reject"];function Bt({btnObj:d,cols:o,seledRows:m,seledKeys:v,total:f,exportLimit:l,emits:y,next:e}){const{name:t="",text:u,attrs:n,customRules:s}=d,c=(n==null?void 0:n.type)||"primary",i=`color${J.upperFirst(c)}`,h=te[i];if($e.includes(t)&&!s){const $=m.length===f,N=m.length>l;if(["export"].includes(t)&&N)oe.warning({message:`单次${u}不能超过 <b>${l}</b> 条，请缩小查询范围！`,dangerouslyUseHTMLString:!0});else{const W=`确定 <b style="color:${h};">${u}${$?"全部</b> ？":"</b>"} 共 <b style="color:${h};">${m.length}</b> 条记录。`;ye.confirm(W,"温馨提示",{type:t==="delete"?"error":"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1}).then(()=>{const I=[];if(t==="export"){const r=(o==null?void 0:o.filter(w=>{var O;return L(w)!=="Object"?!1:!((O=w==null?void 0:w.prop)!=null&&O.startsWith("$"))}))||[];I.push(r.map(w=>w.label)),m.forEach(w=>{const O=[];r.forEach(D=>{const{prop:M,type:G,formatter:z}=D;let P="";[void 0,"index","id","create","update","remark"].includes(G)&&(P=z?z(w):w[M]??""),O.push(P)}),I.push(O)})}y("extraBtn",t,v,e,m,I)}).catch(()=>{})}}else y("extraBtn",t,[],e,[],[])}function Ve(d=1,o=20){return Object.assign({index:{prop:"$index",label:"序号",type:"index",width:54,fixed:"left",index:m=>m+1+(d-1)*o},sort:{prop:"$sort",label:"排序",type:"sort",width:54,fixed:"left"},selection:{prop:"$selection",label:"选择",type:"selection",width:48,fixed:"left"},operate:{prop:"$operate",label:"操作",type:"operate",fixed:"right"},id:{prop:"id",label:"ID",minWidth:70,fixed:"left"},remark:{prop:"remark",label:"备注",minWidth:140},create:{prop:["createdName","createdAt"],label:"创建时间",minWidth:160},update:{prop:["updatedName","updatedAt"],label:"修改时间",minWidth:160},switch:{prop:"status",label:"启用状态",minWidth:80,attrs:{activeValue:1,inactiveValue:0,activeText:"启用",inactiveText:"禁用",inlinePrompt:!0}},BaseTag:{prop:"status",label:"状态",minWidth:90,attrs:{name:"Enable"}},BaseImg:{prop:"imgUrl",label:"图片",minWidth:136,attrs:{size:"120"}},BaseView:{prop:"content",label:"内容",minWidth:250}},Te)}function ne(d,o=0,m,v,f){let l=o;const{children:y,type:e,prop:t,label:u,minWidth:n}=d,s=m[e],{getAttrs:c}=s||{},i=J.merge({},v,s,(u==null?void 0:u.includes("时间"))&&{minWidth:164,formatter:e!=="custom"&&L(t)==="String"?h=>fe(h,t):void 0},c==null?void 0:c(d),d);if(L(i.prop)==="Array"&&(i.prop=i.prop.join(F)),f){const{width:h,minWidth:$}=i;h&&(i.width-=20),$&&(i.minWidth-=20)}return y!=null&&y.length&&(i.children=y.map(h=>{if(L(h)!=="Object")return 0;const{col:$,level:N}=ne(h,o++,m,v);return N>l&&(l=N),$})),{col:i,level:l}}function U(d,o){var f,l;const{groupBtns:m,cols:v=[]}=o;return d==="operate"?m&&((l=(f=v.slice(-1))==null?void 0:f[0])==null?void 0:l.type)!=="operate":o[d]&&!v.find(e=>e.type===d)}function kt(d,o){const{prop:m,attrs:v,type:f=he,options:l=[]}=d;return f==="cascader"?L(o)==="Array"?le(l,o):H(l,o):f==="select"?v!=null&&v.multiple?l.filter(e=>o.includes(e.value)).map(e=>e.label).join("、"):H(l,o):f==="BaseNumberRange"?o==null?void 0:o.join(X):f==="date-picker"?o==null?void 0:o.join(X):o}const we=R({__name:"GroupBtns",props:ge({btns:{},row:{},maxNum:{},vertical:{type:Boolean},emptyStr:{}},{btns:()=>[],...Object.assign({maxNum:Ae,emptyStr:"-"},Se)}),emits:["click"],setup(d,{emit:o}){const m={size:"small",plain:!0,text:!0},v=se(),f=_e("closePopup"),l=d,y=o;let e=!1;const t=Z(()=>{var s;return((s=l.btns)==null?void 0:s.length)>l.maxNum}),u=Z(()=>{var i;const{maxNum:s}=l,c=((i=l.btns)==null?void 0:i.map(h=>me(h)))||[];return re(c),e=!c.slice(s-1).some(h=>h.popconfirm),c});function n(s){const{name:c,text:i,to:h}=s;h?v.push(h):y("click",s,($=`${i||"操作"}成功！`,N,W)=>{ie($),f(N),W==null||W()})}return(s,c)=>{const i=_("BaseBtn"),h=_("el-button"),$=_("el-dropdown-item"),N=_("el-dropdown-menu"),W=_("el-dropdown");return a(),b("div",{class:ve(["group-btns",s.vertical?"f-c-c-c":"f-c-c"])},[(a(!0),b(A,null,K(u.value.slice(0,t.value?s.maxNum-1:s.maxNum),(I,r)=>(a(),g(i,S({class:{"ml-0-i":s.vertical},name:I,data:s.row,onClick:w=>n(I)},m,{key:r}),null,16,["class","name","data","onClick"]))),128)),t.value?(a(),g(W,{key:0,class:"ml-12",trigger:V(e)?"hover":"click","hide-on-click":V(e)},{dropdown:C(()=>[T(N,null,{default:C(()=>[(a(!0),b(A,null,K(u.value.slice(s.maxNum-1),(I,r)=>(a(),g($,{key:r},{default:C(()=>[T(i,S({name:I,data:s.row,onClick:w=>n(I)},m),null,16,["name","data","onClick"])]),_:2},1024))),128))]),_:1})]),default:C(()=>[T(h,S({class:{"ml-0-i":s.vertical},icon:V(de),type:"primary"},m),{default:C(()=>[B(" 更多 ")]),_:1},16,["class","icon"])]),_:1},8,["trigger","hide-on-click"])):E("",!0),u.value.length?E("",!0):(a(),b(A,{key:1},[B(k(s.emptyStr),1)],64))],2)}}});const Ie=Q(we,[["__scopeId","data-v-8eecbc31"]]),Oe={key:0,class:"user-info f-sb-s"},Ne={class:"f-1 f-sb-s-c"},We={class:"f-fs-c"},Ee={class:"f-0 mr-o"},ze={class:"f-sb-c"},Le={class:"avatar-box f-0 mr-8"},je={class:"f-1 f-sb-s-c"},Re={class:"f-sb-c"},De={class:"f-0 age"},Me={class:"f-sb-c"},Ge={class:"f-0 item"},Pe={class:"f-0 item"},Ue={class:"f-fs-c"},Fe={class:"item f-0"},Ke={class:"item f-0"},qe={class:"f-fs-fs"},Je={class:"item f-0"},Qe={class:"item f-0"},He={class:"f-fs-c"},Xe={class:"item f-0"},Ye={class:"item f-0"},Ze=R({__name:"UserInfo",props:{data:{default:()=>({})},simple:{type:Boolean}},setup(d){const o=se(),{getOpts:m,getText:v}=ke(),{getDictText:f}=Ce(),l=d;function y(t){const{companyStatus:u,schoolStatus:n}=t;let s=0;return u===0&&n===0?s=4:u===0?s=3:n===0?s=2:s=1,s}function e(){o.push({name:"userDetail",query:{id:l.data.id}})}return(t,u)=>{const n=_("BaseAvatar"),s=_("BaseCopy"),c=_("BaseTag"),i=_("el-popover");return t.data?(a(),b("div",Oe,[t.simple?(a(),b(A,{key:0},[T(n,{class:"avatar simple f-0 mr-8",src:t.data.avatar,gender:t.data.gender},null,8,["src","gender"]),p("div",Ne,[p("b",{onClick:e,class:"nickname line-1"},k(t.data.nickname||"-"),1),p("div",We,[p("div",Ee,[B("ID："),T(s,{text:t.data.id,line:"1"},null,8,["text"])]),T(c,{class:"f-0 sex",name:"Sex",value:t.data.gender,size:"small",pureText:""},null,8,["value"])]),p("div",ze,[T(c,{class:"f-0",name:"AccountStatus",value:t.data.accountStatus,size:"small"},null,8,["value"]),T(c,{class:"f-0",name:"AuthCase",value:y(t.data),size:"small"},null,8,["value"])])])],64)):(a(),b(A,{key:1},[p("div",Le,[t.data.companyStatus===0?(a(),g(i,{key:0,"show-after":200,"hide-after":0,trigger:"hover"},{reference:C(()=>[T(c,{class:"company",name:"AuthCase",value:"3"},{default:C(()=>[B("公司")]),_:1})]),default:C(()=>[p("div",null,k(t.data.companyName),1)]),_:1})):E("",!0),T(n,{class:"avatar",src:t.data.avatar,gender:t.data.gender},null,8,["src","gender"]),t.data.schoolStatus===0?(a(),g(i,{key:1,"show-after":200,"hide-after":0,trigger:"hover"},{reference:C(()=>[T(c,{class:"education",name:"AuthCase",value:"2"},{default:C(()=>[B("学历")]),_:1})]),default:C(()=>[p("div",null,k(V(v)("Education",t.data.schoolCertificateLevel)||"-"),1)]),_:1})):E("",!0)]),p("div",je,[p("div",Re,[p("b",{onClick:e,class:"nickname line-1"},k(t.data.nickname||"-"),1),T(c,{class:"f-0 sex",name:"Sex",value:t.data.gender,size:"small",pureText:""},null,8,["value"]),p("span",De,k(t.data.age||"0")+"岁",1),T(c,{class:"f-0 ml-h mr-a",name:"MatrimonyStatus",value:t.data.singleType,size:"small",pureText:""},null,8,["value"]),T(c,{class:"f-0",name:"AccountStatus",value:t.data.accountStatus,size:"small"},null,8,["value"])]),p("div",Me,[p("div",Ge,[B("ID："),T(s,{text:t.data.id,line:"1"},null,8,["text"])]),p("div",Pe,[B(" 学号："),T(s,{text:t.data.userCode,line:"1"},null,8,["text"])])]),p("div",Ue,[p("div",Fe,[B(" 学历："),p("b",null,k(V(v)("Education",t.data.schoolCertificateLevel)||"-"),1)]),p("div",Ke,[B(" 学校："),p("b",null,k(t.data.schoolName||"-"),1)])]),p("div",qe,[p("div",Je,[B(" 职业："),p("b",null,k(t.data.jobName||"-"),1)]),p("div",Qe,[B(" 收入："),p("b",null,k(t.data.incomeTypeName||"-"),1)])]),p("div",He,[p("div",Xe,[B(" 现居地："),p("b",null,k(V(f)("Region",t.data.liveCity)||"-"),1)]),p("div",Ye,[B(" 家乡："),p("b",null,k(V(f)("Region",t.data.city)||"-"),1)])])])],64))])):E("",!0)}}});const xe=Q(Ze,[["__scopeId","data-v-d9777671"]]),et=R({__name:"CustomSpecialCols",props:{col:{},row:{}},setup(d){return(o,m)=>o.col.type==="UserInfo"?(a(),g(xe,S({key:0,data:o.row[o.col.prop]},o.col.attrs),null,16,["data"])):E("",!0)}}),tt=R({__name:"Column",props:{col:{},disabled:{type:Boolean},selection:{type:Boolean},refreshList:{},groupBtnsAttrs:{},getGroupBtnsOfRow:{}},emits:["groupBtn"],setup(d,{emit:o}){const m=d,v=o,f=ce(m.col.popover);function l(e,{row:t,col:u,$index:n},s){v("groupBtn",e,{row:t,col:u,$index:n},s)}function y(e,t,u){const{attrs:n={}}=e,{fetch:s,idKeys:c=["id","id"],statusKey:i="status"}=n,h=(n==null?void 0:n.activeValue)===t[i]?"in":"";u!==-1&&(s==null||s({[c[0]]:t[c[1]],[i]:n==null?void 0:n[h+"activeValue"]}).then(()=>{var $;oe.success(`${n==null?void 0:n[h+"activeText"]}成功`),($=m.refreshList)==null||$.call(m)}))}return(e,t)=>{var I;const u=_("el-table-column"),n=_("Column",!0),s=_("BaseIcon"),c=_("el-popover"),i=_("el-switch"),h=_("BaseTag"),$=_("BaseImg"),N=_("BaseView"),W=_("BaseCopy");return e.col.type&&["index","selection"].includes(e.col.type)?(a(),g(u,j(S({key:0},e.col)),null,16)):(a(),b(A,{key:1},[(I=e.col.children)!=null&&I.length?(a(),g(u,S({key:0},V(Y)(e.col,["children"]),{"reserve-selection":e.selection}),{default:C(()=>{var r;return[(a(!0),b(A,null,K((r=e.col)==null?void 0:r.children,(w,O)=>(a(),g(n,{col:w,selection:e.selection,refreshList:e.refreshList,groupBtnsAttrs:e.groupBtnsAttrs,getGroupBtnsOfRow:e.getGroupBtnsOfRow,disabled:e.disabled,key:O},null,8,["col","selection","refreshList","groupBtnsAttrs","getGroupBtnsOfRow","disabled"]))),128))]}),_:1},16,["reserve-selection"])):(a(),b(A,{key:1},[e.col.formatter?(a(),g(u,S({key:0},e.col,{formatter:e.col.formatter,"reserve-selection":e.selection}),null,16,["formatter","reserve-selection"])):(a(),g(u,S({key:1},e.col,{"reserve-selection":e.selection}),{header:C(({column:r,$index:w,store:O})=>[B(k(r.label)+" ",1),V(f)?(a(),g(c,j(S({key:0},V(f))),{reference:C(()=>[T(s,{color:V(te).colorInfo,class:"icon-popover",name:"QuestionFilled"},null,8,["color"])]),_:1},16)):E("",!0)]),default:C(({row:r,column:w,$index:O})=>{var D,M,G;return[e.col.type?e.col.type==="operate"?(a(),g(Ie,S({key:1,row:{...r,$index:O},btns:e.getGroupBtnsOfRow({...r,$index:O})},e.groupBtnsAttrs,{onClick:(z,P)=>l(z,{row:r,col:e.col,$index:O},P)}),null,16,["row","btns","onClick"])):e.col.type==="sort"?(a(),g(s,{key:2,class:"sort-icon",name:"Sort",size:"1em"})):["id","remark"].includes(e.col.type)?(a(),b(A,{key:3},[B(k((r==null?void 0:r[e.col.prop])||"-"),1)],64)):e.col.type==="custom"?ae(e.$slots,"custom",j(S({key:4},{row:r,col:e.col,ind:O}))):["create","update"].includes(e.col.type)?(a(),b(A,{key:5},[(D=e.col.prop)!=null&&D.includes(V(F))?(a(),b(A,{key:0},[p("div",null,k((r==null?void 0:r[e.col.prop.split(V(F))[0]])||"-"),1),p("div",null,k((r==null?void 0:r[e.col.prop.split(V(F))[1]])||"-"),1)],64)):(a(),b(A,{key:1},[B(k((r==null?void 0:r[e.col.prop])||"-"),1)],64))],64)):e.col.type==="switch"?(a(),b(A,{key:6},[(G=(M=e.col)==null?void 0:M.attrs)!=null&&G.fetch?(a(),g(i,S({key:0,modelValue:r[e.col.prop]},V(Y)(e.col.attrs,["onChange"]),{onChange:z=>y(e.col,r,O)}),null,16,["modelValue","onChange"])):(a(),g(i,S({key:1,modelValue:r[e.col.prop],"onUpdate:modelValue":z=>r[e.col.prop]=z},e.col.attrs),null,16,["modelValue","onUpdate:modelValue"]))],64)):e.col.type==="BaseTag"?(a(),g(h,S({key:7,value:r[e.col.prop]},e.col.attrs),null,16,["value"])):e.col.type==="BaseImg"?(a(),b(A,{key:8},[r[e.col.prop]?(a(),g($,S({key:0,style:{margin:"0 auto"},src:r[e.col.prop]},e.col.attrs),null,16,["src"])):(a(),b(A,{key:1},[B("-")],64))],64)):e.col.type==="BaseView"?(a(),g(N,j(S({key:9},e.col.attrs)),{default:C(()=>[B(k(r[e.col.prop]||"-"),1)]),_:2},1040)):e.col.type==="BaseCopy"?(a(),g(W,S({key:10,text:r[e.col.prop]},e.col.attrs),null,16,["text"])):(a(),g(et,{key:11,row:r,col:e.col},null,8,["row","col"])):(a(),b(A,{key:0},[B(k(V(pe).includes(r[e.col.prop])?"-":r[e.col.prop]),1)],64))]}),_:3},16,["reserve-selection"]))],64))],64))}}}),st=R({__name:"BaseTable",props:{cols:{default:()=>[]},rows:{default:()=>[]},total:{},pageAttrs:{},sort:{type:Boolean},index:{type:Boolean},selection:{type:Boolean},sortable:{type:Boolean},showSummary:{type:Boolean},summaryMethod:{type:Function,default:ue}},setup(d,{expose:o}){const m={border:!0,highlightCurrentRow:!0},v={align:"center",headerAlign:"center"},f=Ve(),l=d,y=x(),e=q(J.merge({},m)),t=x([]);return be(()=>{const{cols:n}=l;U("index",l)&&n.unshift(f.index),U("sort",l)&&n.unshift(f.sort),U("selection",l)&&n.unshift(f.selection),U("operate",l)&&n.push(f.operate),n.map(s=>{if(L(s)!=="Object")return 1;const{col:c,level:i}=ne(s,1,f,v);return t.value.push(c),i})})(),o({tableRef:y}),(n,s)=>{const c=_("BaseEmpty"),i=_("el-table");return t.value.length?(a(),g(i,S({key:0,class:"base-table",data:n.rows},e,{ref_key:"tableRef",ref:y}),{empty:C(()=>[T(c)]),default:C(()=>[(a(!0),b(A,null,K(t.value,(h,$)=>(a(),g(tt,{col:h,selection:n.selection,key:$},{custom:C(({row:N,col:W,ind:I})=>[ae(n.$slots,W.prop,j(Be({row:N,col:W,$index:I})),void 0,!0)]),_:2},1032,["col","selection"]))),128))]),_:3},16,["data"])):E("",!0)}}});const ot=Q(st,[["__scopeId","data-v-a37f6337"]]),Ct=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"}));export{ot as B,Se as G,tt as _,ne as a,bt as b,kt as c,Ae as d,$e as e,Ct as f,Ve as g,Bt as h,U as n};
