import{q as E,r as d,a6 as m,t as _,v as V,y as N,L as h,z as y,x as g,K as x,D as A,I as $,E as D,J as R}from"./runtime-core.esm-bundler-95bf9971.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";const q={class:"f-0 ml-h"},J=["muted"],K=["src"],L=["src"],U=E({__name:"BaseAudio",props:{src:{},showProgress:{type:Boolean,default:!0},default:{type:Boolean,default:!0}},setup(F,{expose:k}){const o=d(null),s=d(!1),i=d(0),u=d(!1),r=d("00:00/00:00"),t=d(!0);function I(e){const{currentTime:a,duration:l}=o.value;r.value=`${n(a)}/${n(l)}`,t.value=!l}function P(e){const{currentTime:a,duration:l}=o.value;r.value=`${n(a)}/${n(l)}`,i.value=a/l*100}function S(){s.value=!1,r.value=`00:00/${n(o.value.duration)}`}function w(e){const{duration:a}=o.value;o.value.currentTime=a*(e/100),c()}function M(e){const{duration:a}=o.value,l=a*(e/100);r.value=`${n(l)}/${n(a)}`,v()}function C(){s.value?v():c()}function p(){t.value||(u.value=!u.value)}function n(e){e=Math.round(e);const a=Math.floor(e/60),l=e%60;return[a,l].map(f=>(f<10?"0":"")+f).join(":")}function c(){t.value||(s.value=!0,o.value.play())}function v(){t.value||(s.value=!1,o.value.pause())}return k({playing:s,progress:i,timeStr:r,muted:u,play:c,pause:v,audioCtx:o,toggleMuted:p,formatTime:n}),(e,a)=>{var B,T;const l=m("BaseIcon"),b=m("el-slider"),f=m("el-tooltip");return _(),V("div",{class:y(["base-audio f-sb-c",{default:!e.$slots.default}])},[N(e.$slots,"default",{playing:s.value,muted:u.value,currentTime:((B=o.value)==null?void 0:B.currentTime)||0,duration:((T=o.value)==null?void 0:T.duration)||0,timeStr:r.value,progress:i.value,play:c,pause:v,togglePlaying:C,toggleMuted:p,formatTime:n},()=>[h(l,{onClick:C,size:"20",class:y(["f-0 btn",{disabled:t.value}]),name:s.value?"VideoPause":"VideoPlay"},null,8,["class","name"]),g("time",q,x(r.value),1),e.showProgress?(_(),A(b,{key:0,onChange:w,onInput:M,modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=z=>i.value=z),"show-tooltip":!1,disabled:t.value,class:"f-1 ml-o"},null,8,["modelValue","disabled"])):$("",!0),h(f,{content:u.value?"取消静音":"静音","show-after":400,disabled:t.value},{default:D(()=>[h(l,{onClick:p,size:"20",class:y(["btn f-0 ml-h",{disabled:t.value}]),name:u.value?"Mute":"Microphone"},null,8,["class","name"])]),_:1},8,["content","disabled"])],!0),e.src?(_(),V("audio",{key:0,onCanplay:I,onTimeupdate:P,onEnded:S,muted:u.value,controls:"",hidden:"",ref_key:"audioRef",ref:o},[g("source",{src:e.src,type:"audio/mpeg"},null,8,K),g("source",{src:e.src,type:"audio/ogg"},null,8,L),R(" 您的浏览器不支持音频播放 ")],40,J)):$("",!0)],2)}}});const O=j(U,[["__scopeId","data-v-9645e8d5"]]);export{O as default};
