import{n as k}from"./common-f4827de9.js";import{c as N}from"./use-form-item-f859f9c0.js";import{P as g}from"./index-54c669c3.js";import{ay as p}from"./index-79ac556c.js";import{q as w,r as m,e as x,a6 as i,t as C,D as h,E as c,L as f,u as b}from"./runtime-core.esm-bundler-95bf9971.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-4a03ead4.js";const R=w({__name:"MenuTree",props:{width:{default:500},data:{},modelValue:{}},emits:["update:modelValue"],setup(_,{emit:v}){const n=_,l=v,y=m(),T=(e,o)=>e.menuType==2?"node-hide":null,r=x(()=>k(n.data,n.modelValue,"menuName")),s=m(null),{formItem:a}=N(),V=e=>{const{id:o,menuName:u}=e,t=Number(e.menuType);t===1?(l("update:modelValue",o),a==null||a.validate("blur"),s.value.hide()):t===2?p.warning("不能选择菜单节点"):t===3&&p.warning("不能选择按钮节点")};return(e,o)=>{const u=i("el-input"),t=i("el-popover");return C(),h(t,{ref_key:"popoverRef",ref:s,placement:"bottom",width:e.width-100,trigger:"click"},{reference:c(()=>[f(u,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=d=>r.value=d),placeholder:"请选择父级菜单",readonly:"",clearable:"",onClear:o[1]||(o[1]=d=>l("update:modelValue",""))},null,8,["modelValue"])]),default:c(()=>[f(b(g),{class:"menu-tree",ref_key:"treeRef",ref:y,data:e.data,props:{label:"menuName",class:T},onNodeClick:V,"expand-on-click-node":!1,"default-expand-all":""},null,8,["data","props"])]),_:1},8,["width"])}}});const L=M(R,[["__scopeId","data-v-820797d4"]]);export{L as default};
